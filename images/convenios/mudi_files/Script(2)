!function(a){function e(){return new Date(Date.UTC.apply(Date,arguments));}function f(){var g=new Date();return e(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate());}var b=function(g,i){var j=this;this.element=a(g);this.language=i.language||this.element.data("date-language")||"en";this.language=this.language in c?this.language:this.language.split("-")[0];this.language=this.language in c?this.language:"en";this.isRTL=c[this.language].rtl||false;this.format=d.parseFormat(i.format||this.element.data("date-format")||c[this.language].format||"mm/dd/yyyy");this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false;}this.forceParse=true;if("forceParse" in i){this.forceParse=i.forceParse;}else{if("dateForceParse" in this.element.data()){this.forceParse=this.element.data("date-force-parse");
}}this.picker=a(d.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element);}else{this.picker.addClass("datepicker-dropdown dropdown-menu");}if(this.isRTL){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right");}if(this.isInput){this.element.attr("autocomplete","off");}this.autoclose=false;if("autoclose" in i){this.autoclose=i.autoclose;}else{if("dateAutoclose" in this.element.data()){this.autoclose=this.element.data("date-autoclose");}}this.keyboardNavigation=true;if("keyboardNavigation" in i){this.keyboardNavigation=i.keyboardNavigation;}else{if("dateKeyboardNavigation" in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation");}}this.viewMode=this.startViewMode=0;switch(i.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1;
break;}this.minViewMode=i.minViewMode||this.element.data("date-min-view-mode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0;break;}}this.viewMode=this.startViewMode=Math.max(this.startViewMode,this.minViewMode);this.todayBtn=(i.todayBtn||this.element.data("date-today-btn")||false);this.todayHighlight=(i.todayHighlight||this.element.data("date-today-highlight")||false);this.calendarWeeks=false;if("calendarWeeks" in i){this.calendarWeeks=i.calendarWeeks;}else{if("dateCalendarWeeks" in this.element.data()){this.calendarWeeks=this.element.data("date-calendar-weeks");}}if(this.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(k,l){return parseInt(l)+1;});}this._allow_update=false;this.weekStart=((i.weekStart||this.element.data("date-weekstart")||c[this.language].weekStart||0)%7);this.weekEnd=((this.weekStart+6)%7);this.startDate=-Infinity;this.endDate=Infinity;
this.daysOfWeekDisabled=[];this.setStartDate(i.startDate||this.element.data("date-startdate"));this.setEndDate(i.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show();}};b.prototype={constructor:b,_events:[],_secondaryEvents:[],_applyEvents:function(k){for(var l=0,g,j;l<k.length;l++){g=k[l][0];j=k[l][1];g.on(j);}},_unapplyEvents:function(k){for(var l=0,g,j;l<k.length;l++){g=k[l][0];j=k[l][1];g.off(j);}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.keyup,this),keydown:a.proxy(this.keydown,this)}]];}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.keyup,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]];
}else{if(this.element.is("div")){this.isInline=true;}else{this._events=[[this.element,{click:a.proxy(this.show,this)}]];}}}this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(g){if(a(g.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length===0){this.hide();}},this)}]];},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events);},_detachEvents:function(){this._unapplyEvents(this._events);},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents);},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents);},show:function(g){if(!this.isInline){this.picker.appendTo("body");}this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(g){g.preventDefault();}this.element.trigger({type:"show",date:this.date});
},hide:function(g){if(this.isInline){return;}if(!this.picker.is(":visible")){return;}this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.startViewMode;this.showMode();if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue();}this.element.trigger({type:"hide",date:this.date});},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date;}},getDate:function(){var g=this.getUTCDate();return new Date(g.getTime()+(g.getTimezoneOffset()*60000));},getUTCDate:function(){return this.date;},setDate:function(g){this.setUTCDate(new Date(g.getTime()-(g.getTimezoneOffset()*60000)));},setUTCDate:function(g){this.date=g;this.setValue();},setValue:function(){var g=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(g);}this.element.data("date",g);}else{this.element.val(g);
}},getFormattedDate:function(g){if(g===undefined){g=this.format;}return d.formatDate(this.date,g,this.language);},setStartDate:function(g){this.startDate=g||-Infinity;if(this.startDate!==-Infinity){this.startDate=d.parseDate(this.startDate,this.format,this.language);}this.update();this.updateNavArrows();},setEndDate:function(g){this.endDate=g||Infinity;if(this.endDate!==Infinity){this.endDate=d.parseDate(this.endDate,this.format,this.language);}this.update();this.updateNavArrows();},setDaysOfWeekDisabled:function(g){this.daysOfWeekDisabled=g||[];if(!a.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/);}this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(i){return parseInt(i,10);});this.update();this.updateNavArrows();},place:function(){if(this.isInline){return;}var j=parseInt(this.element.parents().filter(function(){return a(this).css("z-index")!="auto";}).first().css("z-index"))+10;var i=this.component?this.component.parent().offset():this.element.offset();
var g=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:i.top+g,left:i.left,zIndex:j});},keyup:function(i){this.update();var g=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/[1-2]\d\d\d$/.test(g)){this.checkDateChanged();}},checkDateChanged:function(){var g=false;var j=new Date(this.date);var k=new Date(this.viewDate);if(this.dateWithinRange(j)){this.date=j;this.viewDate=k;this.setValue();this.update();g=true;}if(g){this.changeStopPropagation=true;this.element.trigger({type:"changeDate",date:this.date});var i;if(this.isInput){i=this.element;}else{if(this.component){i=this.element.find("input");}}if(i){i.change();}}},_allow_update:true,update:function(){if(!this._allow_update){return;}var g,i=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){g=arguments[0];i=true;}else{g=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();
}this.date=d.parseDate(g,this.format,this.language);if(i){this.setValue();}if(this.date<this.startDate){this.viewDate=new Date(this.startDate);}else{if(this.date>this.endDate){this.viewDate=new Date(this.endDate);}else{this.viewDate=new Date(this.date);}}this.fill();},fillDow:function(){var i=this.weekStart,j="<tr>";if(this.calendarWeeks){var g='<th class="cw">&nbsp;</th>';j+=g;this.picker.find(".datepicker-days thead tr:first-child").prepend(g);}while(i<this.weekStart+7){j+='<th class="dow">'+c[this.language].daysMin[(i++)%7]+"</th>";}j+="</tr>";this.picker.find(".datepicker-days thead").append(j);},fillMonths:function(){var g="",j=0;while(j<12){g+='<span class="month">'+c[this.language].monthsShort[j++]+"</span>";}this.picker.find(".datepicker-months td").html(g);},fill:function(){var m=new Date(this.viewDate),E=m.getUTCFullYear(),s=m.getUTCMonth(),A=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,z=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,p=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,o=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,k=this.date&&this.date.valueOf(),C=new Date();
this.picker.find(".datepicker-days thead th.switch").text(c[this.language].months[s]+" "+E);this.picker.find("tfoot th.today").text(c[this.language].today).toggle(this.todayBtn!==false);this.updateNavArrows();this.fillMonths();var v=e(E,s-1,28,0,0,0,0),n=d.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(n);v.setUTCDate(n-(v.getUTCDay()-this.weekStart+7)%7);var u=new Date(v);u.setUTCDate(u.getUTCDate()+42);u=u.valueOf();var q=[];var j;while(v.valueOf()<u){if(v.getUTCDay()==this.weekStart){q.push("<tr>");if(this.calendarWeeks){var D=new Date(+v+(this.weekStart-v.getUTCDay()-7)%7*86400000),B=new Date(+D+(7+4-D.getUTCDay())%7*86400000),G=new Date(+(G=e(B.getUTCFullYear(),0,1))+(7+4-G.getUTCDay())%7*86400000),g=(B-G)/86400000/7+1;q.push('<td class="cw">'+g+"</td>");}}j="";if(v.getUTCFullYear()<E||(v.getUTCFullYear()==E&&v.getUTCMonth()<s)){j+=" old";}else{if(v.getUTCFullYear()>E||(v.getUTCFullYear()==E&&v.getUTCMonth()>s)){j+=" new";}}if(this.todayHighlight&&v.getUTCFullYear()==C.getFullYear()&&v.getUTCMonth()==C.getMonth()&&v.getUTCDate()==C.getDate()){j+=" today";
}if(k&&v.valueOf()==k){j+=" active";}if(v.valueOf()<this.startDate||v.valueOf()>this.endDate||a.inArray(v.getUTCDay(),this.daysOfWeekDisabled)!==-1){j+=" disabled";}q.push('<td class="day'+j+'">'+v.getUTCDate()+"</td>");if(v.getUTCDay()==this.weekEnd){q.push("</tr>");}v.setUTCDate(v.getUTCDate()+1);}this.picker.find(".datepicker-days tbody").empty().append(q.join(""));var l=this.date&&this.date.getUTCFullYear();var t=this.picker.find(".datepicker-months").find("th:eq(1)").text(E).end().find("span").removeClass("active");if(l&&l==E){t.eq(this.date.getUTCMonth()).addClass("active");}if(E<A||E>p){t.addClass("disabled");}if(E==A){t.slice(0,z).addClass("disabled");}if(E==p){t.slice(o+1).addClass("disabled");}q="";E=parseInt(E/10,10)*10;var F=this.picker.find(".datepicker-years").find("th:eq(1)").text(E+"-"+(E+9)).end().find("td");E-=1;for(var r=-1;r<11;r++){q+='<span class="year'+(r==-1||r==10?" old":"")+(l==E?" active":"")+(E<A||E>p?" disabled":"")+'">'+E+"</span>";E+=1;}F.html(q);},updateNavArrows:function(){if(!this._allow_update){return;
}var g=new Date(this.viewDate),j=g.getUTCFullYear(),i=g.getUTCMonth();switch(this.viewMode){case 0:if(this.startDate!==-Infinity&&j<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"});}else{this.picker.find(".prev").css({visibility:"visible"});}if(this.endDate!==Infinity&&j>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"});}else{this.picker.find(".next").css({visibility:"visible"});}break;case 1:case 2:if(this.startDate!==-Infinity&&j<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"});}else{this.picker.find(".prev").css({visibility:"visible"});}if(this.endDate!==Infinity&&j>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"});}else{this.picker.find(".next").css({visibility:"visible"});}break;}},click:function(k){k.preventDefault();var m=a(k.target).closest("span, td, th");if(m.length==1){switch(m[0].nodeName.toLowerCase()){case"th":switch(m[0].className){case"switch":this.showMode(1);
break;case"prev":case"next":var j=d.modes[this.viewMode].navStep*(m[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,j);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,j);break;}this.fill();break;case"today":var g=new Date();g=e(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0);this.showMode(-2);var n=this.todayBtn=="linked"?null:"view";this._setDate(g,n);break;}break;case"span":if(!m.is(".disabled")){this.viewDate.setUTCDate(1);if(m.is(".month")){var i=1;var l=m.parent().find("span").index(m);var o=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(l);this.element.trigger({type:"changeMonth",date:this.viewDate});if(this.minViewMode==1){this._setDate(e(o,l,i,0,0,0,0));}}else{var o=parseInt(m.text(),10)||0;var i=1;var l=0;this.viewDate.setUTCFullYear(o);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.minViewMode==2){this._setDate(e(o,l,i,0,0,0,0));}}this.showMode(-1);this.fill();}break;case"td":if(m.is(".day")&&!m.is(".disabled")){var i=parseInt(m.text(),10)||1;
var o=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth();if(m.is(".old")){if(l===0){l=11;o-=1;}else{l-=1;}}else{if(m.is(".new")){if(l==11){l=0;o+=1;}else{l+=1;}}}this._setDate(e(o,l,i,0,0,0,0));}break;}}},_setDate:function(g,j){if(!j||j=="date"){this.date=g;}if(!j||j=="view"){this.viewDate=g;}this.fill();this.setValue();this.element.trigger({type:"changeDate",date:this.date});var i;if(this.isInput){i=this.element;}else{if(this.component){i=this.element.find("input");}}if(i){i.change();if(this.autoclose&&(!j||j=="date")){this.hide();}}},moveMonth:function(g,k){if(!k){return g;}var o=new Date(g.valueOf()),j=o.getUTCDate(),n=o.getUTCMonth(),m=Math.abs(k),p,q;k=k>0?1:-1;if(m==1){q=k==-1?function(){return o.getUTCMonth()==n;}:function(){return o.getUTCMonth()!=p;};p=n+k;o.setUTCMonth(p);if(p<0||p>11){p=(p+12)%12;}}else{for(var l=0;l<m;l++){o=this.moveMonth(o,k);}p=o.getUTCMonth();o.setUTCDate(j);q=function(){return p!=o.getUTCMonth();};}while(q()){o.setUTCDate(--j);o.setUTCMonth(p);
}return o;},moveYear:function(g,i){return this.moveMonth(g,i*12);},dateWithinRange:function(g){return g>=this.startDate&&g<=this.endDate;},keydown:function(k){if(this.picker.is(":not(:visible)")){if(k.keyCode==27){this.show();}return;}var g=false,j,i,m,n,o;switch(k.keyCode){case 27:this.hide();k.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation){break;}j=k.keyCode==37?-1:1;if(k.ctrlKey){n=this.moveYear(this.date,j);o=this.moveYear(this.viewDate,j);}else{if(k.shiftKey){n=this.moveMonth(this.date,j);o=this.moveMonth(this.viewDate,j);}else{n=new Date(this.date);n.setUTCDate(this.date.getUTCDate()+j);o=new Date(this.viewDate);o.setUTCDate(this.viewDate.getUTCDate()+j);}}if(this.dateWithinRange(n)){this.date=n;this.viewDate=o;this.setValue();this.update();k.preventDefault();g=true;}break;case 38:case 40:if(!this.keyboardNavigation){break;}j=k.keyCode==38?-1:1;if(k.ctrlKey){n=this.moveYear(this.date,j);o=this.moveYear(this.viewDate,j);}else{if(k.shiftKey){n=this.moveMonth(this.date,j);
o=this.moveMonth(this.viewDate,j);}else{n=new Date(this.date);n.setUTCDate(this.date.getUTCDate()+j*7);o=new Date(this.viewDate);o.setUTCDate(this.viewDate.getUTCDate()+j*7);}}if(this.dateWithinRange(n)){this.date=n;this.viewDate=o;this.setValue();this.update();k.preventDefault();g=true;}break;case 13:this.hide();k.preventDefault();break;case 9:this.hide();break;}if(g){this.element.trigger({type:"changeDate",date:this.date});var l;if(this.isInput){l=this.element;}else{if(this.component){l=this.element.find("input");}}if(l){l.change();}}},showMode:function(g){if(g){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+g));}this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows();}};a.fn.datepicker=function(j){var g=Array.apply(null,arguments);g.shift();var i;this.each(function(){var k=a(this),l=k.data("datepicker"),m=typeof j=="object"&&j;if(!l){k.data("datepicker",(l=new b(this,a.extend({},a.fn.datepicker.defaults,m))));
}if(typeof j=="string"&&typeof l[j]=="function"){i=l[j].apply(l,g);if(i!==undefined){return false;}}});if(i!==undefined){return i;}else{return this;}};a.fn.datepicker.defaults={};a.fn.datepicker.Constructor=b;var c=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}};var d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(g){return(((g%4===0)&&(g%100!==0))||(g%400===0));},getDaysInMonth:function(i,g){return[31,(d.isLeapYear(i)?29:28),31,30,31,30,31,31,30,31,30,31][g];},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(g){var j=g.replace(this.validParts,"\0").split("\0"),i=g.match(this.validParts);
if(!j||!j.length||!i||i.length===0){throw new Error("Invalid date format.");}return{separators:j,parts:i};},parseDate:function(j,m,p){if(j instanceof Date){return j;}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(j)){var t=/([\-+]\d+)([dmwy])/,u=j.match(/([\-+]\d+)([dmwy])/g),r,k;j=new Date();for(var o=0;o<u.length;o++){r=t.exec(u[o]);k=parseInt(r[1]);switch(r[2]){case"d":j.setUTCDate(j.getUTCDate()+k);break;case"m":j=b.prototype.moveMonth.call(b.prototype,j,k);break;case"w":j.setUTCDate(j.getUTCDate()+k*7);break;case"y":j=b.prototype.moveYear.call(b.prototype,j,k);break;}}return e(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate(),0,0,0);}var u=j&&j.match(this.nonpunctuation)||[],j=new Date(),q={},A=["yyyy","yy","M","MM","m","mm","d","dd"],z={yyyy:function(i,s){return i.setUTCFullYear(s);},yy:function(i,s){return i.setUTCFullYear(2000+s);},m:function(i,s){s-=1;while(s<0){s+=12;}s%=12;i.setUTCMonth(s);while(i.getUTCMonth()!=s){i.setUTCDate(i.getUTCDate()-1);}return i;},d:function(i,s){return i.setUTCDate(s);
}},B,l,r;z["M"]=z["MM"]=z["mm"]=z["m"];z["dd"]=z["d"];j=e(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0);var n=m.parts.slice();if(u.length!=n.length){n=a(n).filter(function(s,C){return a.inArray(C,A)!==-1;}).toArray();}if(u.length==n.length){for(var o=0,g=n.length;o<g;o++){B=parseInt(u[o],10);r=n[o];if(isNaN(B)){switch(r){case"MM":l=a(c[p].months).filter(function(){var i=this.slice(0,u[o].length),s=u[o].slice(0,i.length);return i==s;});B=a.inArray(l[0],c[p].months)+1;break;case"M":l=a(c[p].monthsShort).filter(function(){var i=this.slice(0,u[o].length),s=u[o].slice(0,i.length);return i==s;});B=a.inArray(l[0],c[p].monthsShort)+1;break;}}q[r]=B;}for(var o=0,v;o<A.length;o++){v=A[o];if(v in q&&!isNaN(q[v])){z[v](j,q[v]);}}}return j;},formatDate:function(j,k,m){var o={d:j.getUTCDate(),D:c[m].daysShort[j.getUTCDay()],DD:c[m].days[j.getUTCDay()],m:j.getUTCMonth()+1,M:c[m].monthsShort[j.getUTCMonth()],MM:c[m].months[j.getUTCMonth()],yy:j.getUTCFullYear().toString().substring(2),yyyy:j.getUTCFullYear()};
o.dd=(o.d<10?"0":"")+o.d;o.mm=(o.m<10?"0":"")+o.m;var j=[],n=a.extend([],k.separators);for(var l=0,g=k.parts.length;l<g;l++){if(n.length){j.push(n.shift());}j.push(o[k.parts[l]]);}return j.join("");},headTemplate:"<thead>"+"<tr>"+'<th class="prev"><i class="icon icon-arrow-left"/></th>'+'<th colspan="5" class="switch"></th>'+'<th class="next"><i class="icon icon-arrow-right"/></th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};d.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table>"+"</div>"+"</div>";a.fn.datepicker.DPGlobal=d;
}(window.jQuery);(function(b,n){var j,k,l,m,c,o=window.Sizzle||null,q,a,i,t,d,s=b[n],p="undefined",r=false,f=(typeof window.jQuery!==p),g=(typeof window.sessionStorage!==p),e=window.document;d={smoothScroll:true,scrollDuration:1000,scrollTopMargin:200,showCloseButton:true,showPrevButton:false,showNextButton:true,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:true,cookieName:"hopscotch.tour.state"};if(s){return;}if(!Array.isArray){Array.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]";};}t=function(){if(r){s.startTour();}};q={addClass:function(A,u){var z,v,D,B,C;if(!A.className){A.className=u;}else{v=u.split(/\s+/);z=" "+A.className+" ";for(B=0,C=v.length;B<C;++B){if(z.indexOf(" "+v[B]+" ")<0){z+=v[B]+" ";}}A.className=z.replace(/^\s+|\s+$/g,"");}},removeClass:function(B,u){var A,v,z,C,D;v=u.split(/\s+/);A=" "+B.className+" ";for(C=0,D=v.length;C<D;++C){A=A.replace(" "+v[C]+" "," ");}B.className=A.replace(/^\s+|\s+$/g,"");},getPixelValue:function(u){var v=typeof u;
if(v==="number"){return u;}if(v==="string"){return parseInt(u,10);}return 0;},valOrDefault:function(u,v){return typeof u!==p?u:v;},invokeCallbackArrayHelper:function(u){var v;if(Array.isArray(u)){v=i[u[0]];if(typeof v==="function"){v.apply(this,u.slice(1));}}},invokeCallbackArray:function(u){var v,z;if(Array.isArray(u)){if(typeof u[0]==="string"){q.invokeCallbackArrayHelper(u);}else{for(v=0,z=u.length;v<z;++v){q.invokeCallback(u[v]);}}}},invokeCallback:function(u){if(typeof u==="function"){u();}if(typeof u==="string"&&i[u]){i[u]();}else{q.invokeCallbackArray(u);}},invokeEventCallbacks:function(z,D){var v=a[z],u,A,B,C;if(D){this.invokeCallback(D);}for(B=0,C=v.length;B<C;++B){this.invokeCallback(v[B].cb);}},getScrollTop:function(){var u;if(typeof window.pageYOffset!==p){u=window.pageYOffset;}else{u=e.documentElement.scrollTop;}return u;},getScrollLeft:function(){var u;if(typeof window.pageXOffset!==p){u=window.pageXOffset;}else{u=e.documentElement.scrollLeft;}return u;},getWindowHeight:function(){return window.innerHeight||e.documentElement.clientHeight;
},getWindowWidth:function(){return window.innerWidth||e.documentElement.clientWidth;},addEvtListener:function(u,v,z){return u.addEventListener?u.addEventListener(v,z,false):u.attachEvent("on"+v,z);},removeEvtListener:function(u,v,z){return u.removeEventListener?u.removeEventListener(v,z,false):u.detachEvent("on"+v,z);},documentIsReady:function(){return e.readyState==="complete"||e.readyState==="interactive";},evtPreventDefault:function(u){if(u.preventDefault){u.preventDefault();}else{if(event){event.returnValue=false;}}},extend:function(u,v){var z;for(z in v){if(v.hasOwnProperty(z)){u[z]=v[z];}}},getStepTargetHelper:function(v){var u;if(/^[#\.]/.test(v)){if(e.querySelector){return e.querySelector(v);}if(f){u=jQuery(v);return u.length?u[0]:null;}if(o){u=new o(v);return u.length?u[0]:null;}if(/^#[a-zA-Z][\w-_:.]*$/.test(v)){return e.getElementById(v.substring(1));}return null;}return e.getElementById(v);},getStepTarget:function(A){var z;if(!A||!A.target){return null;}if(typeof A.target==="string"){A.target=q.getStepTargetHelper(A.target);
return A.target;}else{if(Array.isArray(A.target)){var u,v;for(u=0,v=A.target.length;u<v;u++){if(typeof A.target[u]==="string"){z=q.getStepTargetHelper(A.target[u]);if(z){A.target=z;return z;}}}return null;}}return A.target;},getI18NString:function(u){return c[u]||m[u];},setState:function(A,B,v){var z="",u;if(g){sessionStorage.setItem(A,B);}else{if(v){u=new Date();u.setTime(u.getTime()+(v*24*60*60*1000));z="; expires="+u.toGMTString();}e.cookie=A+"="+B+z+"; path=/";}},getState:function(A){var B=A+"=",v=e.cookie.split(";"),z,u,C;if(g){C=sessionStorage.getItem(A);}else{for(z=0;z<v.length;z++){u=v[z];while(u.charAt(0)===" "){u=u.substring(1,u.length);}if(u.indexOf(B)===0){C=u.substring(B.length,u.length);break;}}}return C;},clearState:function(u){if(g){sessionStorage.removeItem(u);}else{this.setState(u,"",-1);}}};q.addEvtListener(window,"load",t);a={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]};i={};m={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};
c={};k=function(u){this.init(u);};k.prototype={isShowing:false,currStep:undefined,_createButton:function(z,A){var u=e.createElement("button"),v="hopscotch-nav-button";u.id=z;if(A){u.innerHTML=A;}if(z.indexOf("prev")>=0){v+=" prev";}else{v+=" next";}q.addClass(u,v);return u;},setPosition:function(G){var D,B,C,z,I,F,v,A=6,H=q.getStepTarget(G),E=this.element,u=this.arrowEl;D=q.getPixelValue(G.width)||this.opt.bubbleWidth;C=q.valOrDefault(G.padding,this.opt.bubblePadding);q.removeClass(E,"fade-in-down fade-in-up fade-in-left fade-in-right");if(!G.placement&&G.orientation){G.placement=G.orientation;}z=H.getBoundingClientRect();if(G.placement==="top"){B=E.offsetHeight;I=(z.top-B)-this.opt.arrowWidth;F=z.left;}else{if(G.placement==="bottom"){I=z.bottom+this.opt.arrowWidth;F=z.left;}else{if(G.placement==="left"){I=z.top;F=z.left-D-2*C-2*A-this.opt.arrowWidth;}else{if(G.placement==="right"){I=z.top;F=z.right+this.opt.arrowWidth;}}}}if(G.arrowOffset!=="center"){v=q.getPixelValue(G.arrowOffset);}else{v=G.arrowOffset;
}if(!v){u.style.top="";u.style.left="";}else{if(G.placement==="top"||G.placement==="bottom"){u.style.top="";if(v==="center"){u.style.left=D/2+C-u.offsetWidth/2+"px";}else{u.style.left=v+"px";}}else{if(G.placement==="left"||G.placement==="right"){u.style.left="";if(v==="center"){B=B||E.offsetHeight;u.style.top=B/2+C-u.offsetHeight/2+"px";}else{u.style.top=v+"px";}}}}if(G.xOffset==="center"){F=(z.left+H.offsetWidth/2)-(D/2)-C;}else{F+=q.getPixelValue(G.xOffset);}if(G.yOffset==="center"){B=B||E.offsetHeight;I=(z.top+H.offsetHeight/2)-(B/2)-C;}else{I+=q.getPixelValue(G.yOffset);}if(!G.fixedElement){I+=q.getScrollTop();F+=q.getScrollLeft();}E.style.position=(G.fixedElement?"fixed":"absolute");E.style.top=I+"px";E.style.left=F+"px";},_initNavButtons:function(){var u=e.createElement("div");this.prevBtnEl=this._createButton("hopscotch-prev",q.getI18NString("prevBtn"));this.nextBtnEl=this._createButton("hopscotch-next",q.getI18NString("nextBtn"));this.doneBtnEl=this._createButton("hopscotch-done",q.getI18NString("doneBtn"));
this.ctaBtnEl=this._createButton("hopscotch-cta");q.addClass(this.doneBtnEl,"hide");u.appendChild(this.prevBtnEl);u.appendChild(this.ctaBtnEl);u.appendChild(this.nextBtnEl);u.appendChild(this.doneBtnEl);q.addEvtListener(this.prevBtnEl,"click",function(v){s.prevStep(true);});q.addEvtListener(this.nextBtnEl,"click",function(v){s.nextStep(true);});q.addEvtListener(this.doneBtnEl,"click",function(v){s.endTour();});u.className="hopscotch-actions";this.buttonsEl=u;this.containerEl.appendChild(u);return this;},_getCloseFn:function(){var u=this;if(!this.closeFn){this.closeFn=function(v){if(u.opt.onClose){q.invokeCallback(u.opt.onClose);}if(u.opt.id&&!u.opt.isTourBubble){s.getCalloutManager().removeCallout(u.opt.id);}else{u.destroy();}q.evtPreventDefault(v);};}return this.closeFn;},initCloseButton:function(){var u=e.createElement("a");u.className="hopscotch-bubble-close";u.href="#";u.title=q.getI18NString("closeTooltip");u.innerHTML=q.getI18NString("closeTooltip");if(this.opt.isTourBubble){q.addEvtListener(u,"click",function(B){var v=s.getCurrStepNum(),z=s.getCurrTour(),A=(v===z.steps.length-1);
q.invokeEventCallbacks("close");s.endTour(true,A);if(B.preventDefault){B.preventDefault();}else{if(event){event.returnValue=false;}}});}else{q.addEvtListener(u,"click",this._getCloseFn());}if(!q.valOrDefault(this.opt.showCloseButton,true)){q.addClass(u,"hide");}this.closeBtnEl=u;this.containerEl.appendChild(u);return this;},_initArrow:function(){var v,u;this.arrowEl=e.createElement("div");this.arrowEl.className="hopscotch-bubble-arrow-container";u=e.createElement("div");u.className="hopscotch-bubble-arrow-border";v=e.createElement("div");v.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(u);this.arrowEl.appendChild(v);this.element.appendChild(this.arrowEl);return this;},_setupCTAButton:function(z){var u,v=this;this._showButton(this.ctaBtnEl,!!z.showCTAButton);if(z.showCTAButton&&z.ctaLabel){this.ctaBtnEl.innerHTML=z.ctaLabel;u=function(){q.removeEvtListener(v.ctaBtnEl,"click",u);if(!v.opt.isTourBubble){s.getCalloutManager().removeCallout(z.id);}if(z.onCTA&&typeof z.onCTA==="function"){z.onCTA();
}};q.addEvtListener(this.ctaBtnEl,"click",u);}},render:function(F,B,C,z){var A=this.element,D,E,v,u;if(F){this.currStep=F;}else{if(this.currStep){F=this.currStep;}}if(!F.placement&&F.orientation){F.placement=F.orientation;}D=q.valOrDefault(F.showNextButton,this.opt.showNextButton);E=q.valOrDefault(F.showPrevButton,this.opt.showPrevButton);this.setTitle(F.title||"");this.setContent(F.content||"");if(this.opt.isTourBubble){this.setNum(B);}this.placement=F.placement;this.showPrevButton(this.prevBtnEl&&E&&B>0);this.showNextButton(this.nextBtnEl&&D&&!C);this.nextBtnEl.innerHTML=F.showSkip?q.getI18NString("skipBtn"):q.getI18NString("nextBtn");if(C){q.removeClass(this.doneBtnEl,"hide");}else{q.addClass(this.doneBtnEl,"hide");}this._setupCTAButton(F);this._setArrow(F.placement);v=q.getPixelValue(F.width)||this.opt.bubbleWidth;u=q.valOrDefault(F.padding,this.opt.bubblePadding);this.containerEl.style.width=v+"px";this.containerEl.style.padding=u+"px";A.style.zIndex=F.zindex||"";if(F.placement==="top"){A.style.top="-9999px";
A.style.left="-9999px";q.removeClass(A,"hide");this.setPosition(F);q.addClass(A,"hide");}else{this.setPosition(F);}if(z){z(!F.fixedElement);}return this;},setTitle:function(u){if(u){this.titleEl.innerHTML=u;q.removeClass(this.titleEl,"hide");}else{q.addClass(this.titleEl,"hide");}return this;},setContent:function(u){if(u){this.contentEl.innerHTML=u;q.removeClass(this.contentEl,"hide");}else{q.addClass(this.contentEl,"hide");}return this;},setNum:function(u){var v=q.getI18NString("stepNums");if(v&&u<v.length){u=v[u];}else{u=u+1;}this.numberEl.innerHTML=u;},_setArrow:function(u){q.removeClass(this.arrowEl,"down up right left");if(u==="top"){q.addClass(this.arrowEl,"down");}else{if(u==="bottom"){q.addClass(this.arrowEl,"up");}else{if(u==="left"){q.addClass(this.arrowEl,"right");}else{if(u==="right"){q.addClass(this.arrowEl,"left");}}}}},_getArrowDirection:function(){if(this.placement==="top"){return"down";}if(this.placement==="bottom"){return"up";}if(this.placement==="left"){return"right";
}if(this.placement==="right"){return"left";}},show:function(){var z=this,u="fade-in-"+this._getArrowDirection(),v=1000;q.removeClass(this.element,"hide");q.addClass(this.element,u);setTimeout(function(){q.removeClass(z.element,"invisible");},50);setTimeout(function(){q.removeClass(z.element,u);},v);this.isShowing=true;return this;},hide:function(v){var u=this.element;v=q.valOrDefault(v,true);u.style.top="";u.style.left="";if(v){q.addClass(u,"hide");q.removeClass(u,"invisible");}else{q.removeClass(u,"hide");q.addClass(u,"invisible");}q.removeClass(u,"animate fade-in-up fade-in-down fade-in-right fade-in-left");this.isShowing=false;return this;},_showButton:function(u,A,z){var v="hide";if(z){v="hide-all";}if(typeof A===p){A=true;}if(A){q.removeClass(u,v);}else{q.addClass(u,v);}},showPrevButton:function(u){this._showButton(this.prevBtnEl,u);},showNextButton:function(u){this._showButton(this.nextBtnEl,u);},showCloseButton:function(u){this._showButton(this.closeBtnEl,u);},destroy:function(){var u=this.element;
if(u){u.parentNode.removeChild(u);}if(this.closeBtnEl){q.removeEvtListener(this.closeBtnEl,"click",this._getCloseFn());}if(this.ctaBtnEl&&this.onCTA){q.removeEvtListener(this.ctaBtnEl,"click",this.onCTA);}},updateButtons:function(){this.showPrevButton(this.opt.showPrevButton);this.showNextButton(this.opt.showNextButton);this.showCloseButton(this.opt.showCloseButton);this.prevBtnEl.innerHTML=q.getI18NString("prevBtn");this.nextBtnEl.innerHTML=q.getI18NString("nextBtn");this.doneBtnEl.innerHTML=q.getI18NString("doneBtn");},init:function(B){var A=e.createElement("div"),z=e.createElement("div"),v=e.createElement("div"),F=this,E=false,C,u,D;this.element=A;this.containerEl=z;this.titleEl=e.createElement("h3");this.contentEl=e.createElement("div");q.addClass(this.titleEl,"hopscotch-title");q.addClass(this.contentEl,"hopscotch-content");D={showPrevButton:d.showPrevButton,showNextButton:d.showNextButton,bubbleWidth:d.bubbleWidth,bubblePadding:d.bubblePadding,arrowWidth:d.arrowWidth,showNumber:true,isTourBubble:true};
B=(typeof B===p?{}:B);q.extend(D,B);this.opt=D;A.className="hopscotch-bubble animated";z.className="hopscotch-bubble-container";if(!D.isTourBubble){A.className+=" hopscotch-callout";}if(D.isTourBubble){this.numberEl=e.createElement("span");this.numberEl.className="hopscotch-bubble-number";z.appendChild(this.numberEl);}else{q.addClass(A,"no-number");}v.appendChild(this.titleEl);v.appendChild(this.contentEl);v.className="hopscotch-bubble-content";z.appendChild(v);A.appendChild(z);this._initNavButtons();this.initCloseButton();this._initArrow();C=function(){if(E||!F.isShowing){return;}E=true;setTimeout(function(){F.setPosition(F.currStep);E=false;},100);};q.addEvtListener(window,"resize",C);this.hide();if(q.documentIsReady()){e.body.appendChild(A);}else{if(e.addEventListener){u=function(){e.removeEventListener("DOMContentLoaded",u);window.removeEventListener("load",u);e.body.appendChild(A);};e.addEventListener("DOMContentLoaded",u,false);}else{u=function(){if(e.readyState==="complete"){e.detachEvent("onreadystatechange",u);
window.detachEvent("onload",u);e.body.appendChild(A);}};e.attachEvent("onreadystatechange",u);}q.addEvtListener(window,"load",u);}}};l=function(){var u={};this.createCallout=function(z){var v;if(z.id){if(u[z.id]){throw"Callout by that id already exists. Please choose a unique id.";}z.showNextButton=z.showPrevButton=false;z.isTourBubble=false;v=new k(z);u[z.id]=v;if(z.target){v.render(z,null,null,function(){v.show();});}}else{throw"Must specify a callout id.";}return v;};this.getCallout=function(v){return u[v];};this.removeAllCallouts=function(){var z,v;for(z in u){if(u.hasOwnProperty(z)){this.removeCallout(z);}}};this.removeCallout=function(z){var v=u[z];u[z]=null;if(!v){return;}v.destroy();};};j=function(M){var P=this,z,A,O,F,E,C,D,u,H=function(S){if(!z){z=new k(O);}if(S){q.extend(z.opt,{bubblePadding:J("bubblePadding"),bubbleWidth:J("bubbleWidth"),showNextButton:J("showNextButton"),showPrevButton:J("showPrevButton"),showCloseButton:J("showCloseButton"),arrowWidth:J("arrowWidth")});z.updateButtons();
}return z;},J=function(S){if(typeof O==="undefined"){return d[S];}return q.valOrDefault(O[S],d[S]);},I=function(){var S;if(E<0||E>=F.steps.length){S=null;}else{S=F.steps[E];}return S;},R=function(){P.nextStep();},v=function(W){var S=H(),U=S.element,V=q.getPixelValue(U.style.top),T=V+q.getPixelValue(U.offsetHeight),af=q.getStepTarget(I()),ae=af.getBoundingClientRect(),ah=ae.top+q.getScrollTop(),ag=ae.bottom+q.getScrollTop(),ai=(V<ah)?V:ah,ad=(T>ag)?T:ag,ak=q.getScrollTop(),aj=ak+q.getWindowHeight(),ac=ai-J("scrollTopMargin"),Y,al,am,X,Z,aa,ab;if(ai>=ak&&(ai<=ak+J("scrollTopMargin")||ad<=aj)){if(W){W();}}else{if(!J("smoothScroll")){window.scrollTo(0,ac);if(W){W();}}else{if(typeof YAHOO!==p&&typeof YAHOO.env!==p&&typeof YAHOO.env.ua!==p&&typeof YAHOO.util!==p&&typeof YAHOO.util.Scroll!==p){Y=YAHOO.env.ua.webkit?e.body:e.documentElement;am=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;al=new YAHOO.util.Scroll(Y,{scroll:{to:[0,ac]}},J("scrollDuration")/1000,am);al.onComplete.subscribe(W);
al.animate();}else{if(f){jQuery("body, html").animate({scrollTop:ac},J("scrollDuration"),W);}else{if(ac<0){ac=0;}X=(ak>ai)?-1:1;Z=Math.abs(ak-ac)/(J("scrollDuration")/10);ab=function(){var ao=q.getScrollTop(),an=ao+(X*Z);if((X>0&&an>=ac)||(X<0&&an<=ac)){an=ac;if(W){W();}window.scrollTo(0,an);return;}window.scrollTo(0,an);if(q.getScrollTop()===ao){if(W){W();}return;}setTimeout(ab,10);};ab();}}}}},K=function(T,S){var W,V,U;if(E+T>=0&&E+T<F.steps.length){E+=T;V=I();U=function(){W=q.getStepTarget(V);if(W){S(E);}else{q.invokeEventCallbacks("error");K(T,S);}};if(V.delay){setTimeout(U,V.delay);}else{U();}}else{S(-1);}},B=function(V,U){var S=H(),X=this,Y,W,Z,T;S.hide();V=q.valOrDefault(V,true);Y=I();W=Y;if(U>0){Z=W.multipage;}else{Z=(E>0&&F.steps[E-1].multipage);}T=function(aa){if(aa===-1){return this.endTour(true);}if(V){if(U>0){q.invokeEventCallbacks("next",W.onNext);}else{q.invokeEventCallbacks("prev",W.onPrev);}}if(Z){q.setState(J("cookieName"),F.id+":"+E,1);return;}this.showStep(aa);};if(!Z&&J("skipIfNoElement")){K(U,function(aa){T.call(X,aa);
});}else{if(E+U>=0&&E+U<F.steps.length){E+=U;Y=I();if(!q.getStepTarget(Y)&&!Z){q.invokeEventCallbacks("error");return this.endTour(true,false);}T.call(this,E);}}return this;},N=function(U){var T={},S,W,V;for(S in U){if(U.hasOwnProperty(S)&&S!=="id"&&S!=="steps"){T[S]=U[S];}}u.call(this,T,true);W=q.getState(J("cookieName"));if(W){V=W.split(":");C=V[0];D=V[1];D=parseInt(D,10);}return this;},G=function(T,S){var U,W,V;E=T||0;U=I();W=q.getStepTarget(U);if(W){S(E);return;}if(!W){q.invokeEventCallbacks("error");if(J("skipIfNoElement")){K(1,S);return;}else{E=-1;S(E);}}},Q=function(Y){var X=F.steps[Y],aa=F.steps,V=aa.length,T=F.id+":"+Y,S=H(),Z=q.getStepTarget(X),U,W;W=function(){S.show();q.invokeEventCallbacks("show",X.onShow);};E=Y;S.hide(false);U=(Y===V-1);S.render(X,Y,U,function(ab){if(ab){v(W);}else{W();}if(X.nextOnTargetClick){q.addEvtListener(Z,"click",R);}});q.setState(J("cookieName"),T,1);},L=function(S){if(S){this.configure(S);}};this.getCalloutManager=function(){if(typeof A===p){A=new l();
}return A;};this.startTour=function(V,U){var S,T=this;if(!F){F=V;N.call(this,V);}if(typeof U!==p){if(U>=F.steps.length){throw"Specified step number out of bounds.";}E=U;}if(!q.documentIsReady()){r=true;return this;}if(!E&&F.id===C&&typeof D!==p){E=D;}else{if(!E){E=0;}}G(E,function(W){var X=(W!==-1)&&q.getStepTarget(F.steps[W]);if(!X){T.endTour(false,false);return;}q.invokeEventCallbacks("start");S=H();S.hide(false);T.isActive=true;if(!q.getStepTarget(I())){q.invokeEventCallbacks("error");if(J("skipIfNoElement")){T.nextStep(false);}}else{T.showStep(W);}});return this;};this.showStep=function(T){var S=F.steps[T];if(S.delay){setTimeout(function(){Q(T);},S.delay);}else{Q(T);}return this;};this.prevStep=function(S){B.call(this,S,-1);return this;};this.nextStep=function(S){var T=I(),U=q.getStepTarget(T);if(T.nextOnTargetClick){q.removeEvtListener(U,"click",R);}B.call(this,S,1);return this;};this.endTour=function(T,U){var S=H();T=q.valOrDefault(T,true);U=q.valOrDefault(U,true);E=0;D=undefined;
S.hide();if(T){q.clearState(J("cookieName"));}if(this.isActive){this.isActive=false;if(F&&U){q.invokeEventCallbacks("end");}}this.removeCallbacks(null,true);this.resetDefaultOptions();F=null;return this;};this.getCurrTour=function(){return F;};this.getCurrStepNum=function(){return E;};this.listen=function(T,S,U){if(T){a[T].push({cb:S,fromTour:U});}return this;};this.unlisten=function(U,S){var T=a[U],V,W;for(V=0,W=T.length;V<W;++V){if(T[V]===S){T.splice(V,1);}}return this;};this.removeCallbacks=function(U,X){var S,V,W,T;for(T in a){if(!U||U===T){if(X){S=a[T];for(V=0,W=S.length;V<W;++V){if(S[V].fromTour){S.splice(V--,1);--W;}}}else{a[T]=[];}}}return this;};this.registerHelper=function(T,S){if(typeof T==="string"&&typeof S==="function"){i[T]=S;}};this.unregisterHelper=function(S){i[S]=null;};this.invokeHelper=function(U){var S=[],T,V;for(T=1,V=arguments.length;T<V;++T){S.push(arguments[T]);}if(i[U]){i[U].call(null,S);}};this.setCookieName=function(S){O.cookieName=S;return this;};this.resetDefaultOptions=function(){O={};
return this;};this.resetDefaultI18N=function(){c={};return this;};this.getState=function(){return q.getState(J("cookieName"));};u=function(Z,X){var S,V=["next","prev","start","end","show","error","close"],U,T,W,Y;if(!O){this.resetDefaultOptions();}q.extend(O,Z);if(Z){q.extend(c,Z.i18n);}for(W=0,Y=V.length;W<Y;++W){U="on"+V[W].charAt(0).toUpperCase()+V[W].substring(1);if(Z[U]){this.listen(V[W],Z[U],X);}}S=H(true);return this;};this.configure=function(S){return u.call(this,S,false);};L.call(this,M);};s=new j();b[n]=s;}(window,"hopscotch"));(function($){var MagicSuggest=function(element,options){var ms=this;var defaults={allowFreeEntries:true,cls:"",data:null,dataUrlParams:{},disabled:false,displayField:"name",editable:true,emptyText:function(){return cfg.editable?"Type or click here":"Click here";},emptyTextCls:"ms-empty-text",expanded:false,expandOnFocus:function(){return cfg.editable?false:true;},groupBy:null,hideTrigger:false,highlight:true,id:function(){return"ms-ctn-"+$('div[id^="ms-ctn"]').length;
},infoMsgCls:"",inputCfg:{},invalidCls:"ms-ctn-invalid",matchCase:false,maxDropHeight:290,maxEntryLength:null,maxEntryRenderer:function(v){return"Please reduce your entry by "+v+" character"+(v>1?"s":"");},maxSuggestions:null,maxSelection:10,maxSelectionRenderer:function(v){return"You cannot choose more than "+v+" item"+(v>1?"s":"");},method:"POST",minChars:0,minCharsRenderer:function(v){return"Please type "+v+" more character"+(v>1?"s":"");},name:null,noSuggestionText:"No suggestions",preselectSingleSuggestion:true,renderer:null,required:false,resultAsString:false,resultsField:"results",selectionCls:"",selectedItemClass:null,selectionPosition:"inner",selectionRenderer:null,selectionStacked:false,sortDir:"asc",sortOrder:null,strictSuggest:false,style:"",toggleOnClick:false,typeDelay:400,useTabKey:false,useCommaKey:true,useZebraStyle:true,value:null,valueField:"id",width:function(){return $(this).width();}};var conf=$.extend({},options);var cfg=$.extend(true,{},defaults,conf);if($.isFunction(cfg.emptyText)){cfg.emptyText=cfg.emptyText.call(this);
}if($.isFunction(cfg.expandOnFocus)){cfg.expandOnFocus=cfg.expandOnFocus.call(this);}if($.isFunction(cfg.id)){cfg.id=cfg.id.call(this);}this.addToSelection=function(items,isSilent){if(!cfg.maxSelection||_selection.length<cfg.maxSelection){if(!$.isArray(items)){items=[items];}var valuechanged=false;$.each(items,function(index,json){if($.inArray(json[cfg.valueField],ms.getValue())===-1){_selection.push(json);valuechanged=true;}});if(valuechanged===true){self._renderSelection();this.empty();if(isSilent!==true){$(this).trigger("selectionchange",[this,this.getSelectedItems()]);}}}};this.clear=function(isSilent){this.removeFromSelection(_selection.slice(0),isSilent);};this.collapse=function(){if(cfg.expanded===true){this.combobox.detach();cfg.expanded=false;$(this).trigger("collapse",[this]);}};this.disable=function(){this.container.addClass("ms-ctn-disabled");cfg.disabled=true;ms.input.attr("disabled",true);};this.empty=function(){this.input.removeClass(cfg.emptyTextCls);this.input.val("");};
this.enable=function(){this.container.removeClass("ms-ctn-disabled");cfg.disabled=false;ms.input.attr("disabled",false);};this.expand=function(){if(!cfg.expanded&&(this.input.val().length>=cfg.minChars||this.combobox.children().size()>0)){this.combobox.appendTo(this.container);self._processSuggestions();cfg.expanded=true;$(this).trigger("expand",[this]);}};this.isDisabled=function(){return cfg.disabled;};this.isValid=function(){return cfg.required===false||_selection.length>0;};this.getDataUrlParams=function(){return cfg.dataUrlParams;};this.getName=function(){return cfg.name;};this.getSelectedItems=function(){return _selection;};this.getRawValue=function(){return ms.input.val()!==cfg.emptyText?ms.input.val():"";};this.getValue=function(){return $.map(_selection,function(o){return o[cfg.valueField];});};this.removeFromSelection=function(items,isSilent){if(!$.isArray(items)){items=[items];}var valuechanged=false;$.each(items,function(index,json){var i=$.inArray(json[cfg.valueField],ms.getValue());
if(i>-1){_selection.splice(i,1);valuechanged=true;}});if(valuechanged===true){self._renderSelection();if(isSilent!==true){$(this).trigger("selectionchange",[this,this.getSelectedItems()]);}if(cfg.expandOnFocus){ms.expand();}if(cfg.expanded){self._processSuggestions();}}};this.setData=function(data){cfg.data=data;self._processSuggestions();};this.setName=function(name){cfg.name=name;if(ms._valueContainer){ms._valueContainer.name=name;}};this.setValue=function(data){var values=data,items=[];if(!$.isArray(data)){if(typeof(data)==="string"){if(data.indexOf("[")>-1){values=eval(data);}else{if(data.indexOf(",")>-1){values=data.split(",");}}}else{values=[data];}}$.each(_cbData,function(index,obj){if($.inArray(obj[cfg.valueField],values)>-1){items.push(obj);}});if(items.length>0){this.addToSelection(items);}};this.setDataUrlParams=function(params){cfg.dataUrlParams=$.extend({},params);};var _selection=[],_comboItemHeight=0,_timer,_hasFocus=false,_groups=null,_cbData=[],_ctrlDown=false;var self={_displaySuggestions:function(data){ms.combobox.empty();
var resHeight=0,nbGroups=0;if(_groups===null){self._renderComboItems(data);resHeight=_comboItemHeight*data.length;}else{for(var grpName in _groups){nbGroups+=1;$("<div/>",{"class":"ms-res-group",html:grpName}).appendTo(ms.combobox);self._renderComboItems(_groups[grpName].items,true);}resHeight=_comboItemHeight*(data.length+nbGroups);}if(resHeight<ms.combobox.height()||resHeight<=cfg.maxDropHeight){ms.combobox.height(resHeight);}else{if(resHeight>=ms.combobox.height()&&resHeight>cfg.maxDropHeight){ms.combobox.height(cfg.maxDropHeight);}}if(data.length===1&&cfg.preselectSingleSuggestion===true){ms.combobox.children().filter(":last").addClass("ms-res-item-active");}if(data.length===0&&ms.getRawValue()!==""){self._updateHelper(cfg.noSuggestionText);ms.collapse();}},_getEntriesFromStringArray:function(data){var json=[];$.each(data,function(index,s){var entry={};entry[cfg.displayField]=entry[cfg.valueField]=$.trim(s);json.push(entry);});return json;},_highlightSuggestion:function(html){var q=ms.input.val()!==cfg.emptyText?ms.input.val():"";
if(q.length===0){return html;}if(cfg.matchCase===true){html=html.replace(new RegExp("("+q+")(?!([^<]+)?>)","g"),"<em>$1</em>");}else{html=html.replace(new RegExp("("+q+")(?!([^<]+)?>)","gi"),"<em>$1</em>");}return html;},_moveSelectedRow:function(dir){if(!cfg.expanded){ms.expand();}var list,start,active,scrollPos;list=ms.combobox.find(".ms-res-item");if(dir==="down"){start=list.eq(0);}else{start=list.filter(":last");}active=ms.combobox.find(".ms-res-item-active:first");if(active.length>0){if(dir==="down"){start=active.nextAll(".ms-res-item").first();if(start.length===0){start=list.eq(0);}scrollPos=ms.combobox.scrollTop();ms.combobox.scrollTop(0);if(start[0].offsetTop+start.outerHeight()>ms.combobox.height()){ms.combobox.scrollTop(scrollPos+_comboItemHeight);}}else{start=active.prevAll(".ms-res-item").first();if(start.length===0){start=list.filter(":last");ms.combobox.scrollTop(_comboItemHeight*list.length);}if(start[0].offsetTop<ms.combobox.scrollTop()){ms.combobox.scrollTop(ms.combobox.scrollTop()-_comboItemHeight);
}}}list.removeClass("ms-res-item-active");start.addClass("ms-res-item-active");},_processSuggestions:function(source){var json=null,data=source||cfg.data;if(data!==null){if(typeof(data)==="function"){data=data.call(ms);}if(typeof(data)==="string"&&data.indexOf(",")<0){$(ms).trigger("beforeload",[ms]);var params=$.extend({query:ms.input.val()},cfg.dataUrlParams);$.ajax({type:cfg.method,url:data,data:params,success:function(asyncData){json=typeof(asyncData)==="string"?JSON.parse(asyncData):asyncData;self._processSuggestions(json);$(ms).trigger("load",[ms,json]);},error:function(){throw ("Could not reach server");}});return;}else{if(typeof(data)==="string"&&data.indexOf(",")>-1){_cbData=self._getEntriesFromStringArray(data.split(","));}else{if(data.length>0&&typeof(data[0])==="string"){_cbData=self._getEntriesFromStringArray(data);}else{_cbData=data[cfg.resultsField]||data;}}}self._displaySuggestions(self._sortAndTrim(_cbData));}},_render:function(el){$(ms).trigger("beforerender",[ms]);var w=$.isFunction(cfg.width)?cfg.width.call(el):cfg.width;
ms.container=$("<div/>",{id:cfg.id,"class":"ms-ctn "+cfg.cls+(cfg.disabled===true?" ms-ctn-disabled":"")+(cfg.editable===true?"":" ms-ctn-readonly"),style:cfg.style}).width(w);ms.container.focus($.proxy(handlers._onFocus,this));ms.container.blur($.proxy(handlers._onBlur,this));ms.container.keydown($.proxy(handlers._onKeyDown,this));ms.container.keyup($.proxy(handlers._onKeyUp,this));ms.input=$("<input/>",$.extend({id:"ms-input-"+$('input[id^="ms-input"]').length,type:"text","class":cfg.emptyTextCls+(cfg.editable===true?"":" ms-input-readonly"),value:cfg.emptyText,readonly:!cfg.editable,disabled:cfg.disabled,autocomplete:"off"},cfg.inputCfg)).attr("style","min-width: 30px;").width(w-(cfg.hideTrigger?16:42));ms.input.focus($.proxy(handlers._onInputFocus,this));ms.input.click($.proxy(handlers._onInputClick,this));if(cfg.hideTrigger===false){ms.trigger=$("<div/>",{id:"ms-trigger-"+$('div[id^="ms-trigger"]').length,"class":"ms-trigger",html:'<div class="ms-trigger-ico"></div>'});ms.trigger.click($.proxy(handlers._onTriggerClick,this));
ms.container.append(ms.trigger);}ms.combobox=$("<div/>",{id:"ms-res-ctn-"+$('div[id^="ms-res-ctn"]').length,"class":"ms-res-ctn "}).width(w).height(cfg.maxDropHeight);ms.combobox.on("click","div.ms-res-item",$.proxy(handlers._onComboItemSelected,this));ms.combobox.on("mouseover","div.ms-res-item",$.proxy(handlers._onComboItemMouseOver,this));ms.selectionContainer=$("<div/>",{id:"ms-sel-ctn-"+$('div[id^="ms-sel-ctn"]').length,"class":"ms-sel-ctn"});ms.selectionContainer.click($.proxy(handlers._onFocus,this));if(cfg.selectionPosition==="inner"){ms.selectionContainer.append(ms.input);}else{ms.container.append(ms.input);}ms.helper=$("<div/>",{"class":"ms-helper "+cfg.infoMsgCls});self._updateHelper();ms.container.append(ms.helper);$(el).replaceWith(ms.container);switch(cfg.selectionPosition){case"bottom":ms.selectionContainer.insertAfter(ms.container);if(cfg.selectionStacked===true){ms.selectionContainer.width(ms.container.width());ms.selectionContainer.addClass("ms-stacked");}break;case"right":ms.selectionContainer.insertAfter(ms.container);
ms.container.css("float","left");break;default:ms.container.append(ms.selectionContainer);break;}self._processSuggestions();if(cfg.value!==null){ms.setValue(cfg.value);self._renderSelection();}$(ms).trigger("afterrender",[ms]);$("body").click(function(e){if(ms.container.hasClass("ms-ctn-bootstrap-focus")&&ms.container.has(e.target).length===0&&e.target.className.indexOf("ms-res-item")<0&&e.target.className.indexOf("ms-close-btn")<0&&ms.container[0]!==e.target){handlers._onBlur();}});if(cfg.expanded===true){cfg.expanded=false;ms.expand();}},_renderComboItems:function(items,isGrouped){var ref=this,html="";$.each(items,function(index,value){var displayed=cfg.renderer!==null?cfg.renderer.call(ref,value):value[cfg.displayField];var resultItemEl=$("<div/>",{"class":"ms-res-item "+(isGrouped?"ms-res-item-grouped ":"")+(index%2===1&&cfg.useZebraStyle===true?"ms-res-odd":""),html:cfg.highlight===true?self._highlightSuggestion(displayed):displayed,"data-json":JSON.stringify(value)});html+=$("<div/>").append(resultItemEl).html();
});ms.combobox.append(html);_comboItemHeight=ms.combobox.find(".ms-res-item:first").outerHeight();ms.combobox.off("click").on("click","div.ms-res-item",$.proxy(handlers._onComboItemSelected,this));ms.combobox.off("mouseover").on("mouseover","div.ms-res-item",$.proxy(handlers._onComboItemMouseOver,this));},_renderSelection:function(){var ref=this,w=0,inputOffset=0,items=[],asText=cfg.resultAsString===true&&!_hasFocus;ms.selectionContainer.find(".ms-sel-item").remove();if(ms._valueContainer!==undefined){ms._valueContainer.remove();}$.each(_selection,function(index,value){var selectedItemEl,delItemEl,selectedItemHtml=cfg.selectionRenderer!==null?cfg.selectionRenderer.call(ref,value):value[cfg.displayField];var selectionCls2=cfg.selectionItemClass!=null?cfg.selectionItemClass.call(ref,value):"";if(asText===true){selectedItemEl=$("<div/>",{"class":"ms-sel-item ms-sel-text "+cfg.selectionCls+" "+selectionCls2,html:selectedItemHtml+(index===(_selection.length-1)?"":",")}).data("json",value);}else{selectedItemEl=$("<div/>",{"class":"ms-sel-item "+cfg.selectionCls+" "+selectionCls2,html:selectedItemHtml}).data("json",value);
if(cfg.disabled===false){delItemEl=$("<span/>",{"class":"ms-close-btn icon icon-remove",}).data("json",value).appendTo(selectedItemEl);delItemEl.click($.proxy(handlers._onTagTriggerClick,ref));}}items.push(selectedItemEl);});ms.selectionContainer.prepend(items);ms._valueContainer=$("<input/>",{type:"hidden",name:cfg.name,value:JSON.stringify(ms.getValue())});ms._valueContainer.appendTo(ms.selectionContainer);if(cfg.selectionPosition==="inner"){ms.input.width(0);inputOffset=ms.input.offset().left-ms.selectionContainer.offset().left;w=ms.container.width()-inputOffset-42;ms.input.width(w);ms.container.height(ms.selectionContainer.height());}if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}else{ms.helper.hide();}},_selectItem:function(item){if(cfg.maxSelection===1){_selection=[];}ms.addToSelection(item.data("json"));item.removeClass("ms-res-item-active");if(cfg.expandOnFocus===false||_selection.length===cfg.maxSelection){ms.collapse();
}if(!_hasFocus){ms.input.focus();}else{if(_hasFocus&&(cfg.expandOnFocus||_ctrlDown)){self._processSuggestions();if(_ctrlDown){ms.expand();}}}},_sortAndTrim:function(data){var q=ms.getRawValue(),filtered=[],newSuggestions=[],selectedValues=ms.getValue();if(q.length>0){$.each(data,function(index,obj){var name=obj[cfg.displayField];if((cfg.matchCase===true&&name.indexOf(q)>-1)||(cfg.matchCase===false&&name.toLowerCase().indexOf(q.toLowerCase())>-1)){if(cfg.strictSuggest===false||name.toLowerCase().indexOf(q.toLowerCase())===0){filtered.push(obj);}}});}else{filtered=data;}$.each(filtered,function(index,obj){if($.inArray(obj[cfg.valueField],selectedValues)===-1){newSuggestions.push(obj);}});if(cfg.sortOrder!==null){newSuggestions.sort(function(a,b){if(a[cfg.sortOrder]<b[cfg.sortOrder]){return cfg.sortDir==="asc"?-1:1;}if(a[cfg.sortOrder]>b[cfg.sortOrder]){return cfg.sortDir==="asc"?1:-1;}return 0;});}if(cfg.maxSuggestions&&cfg.maxSuggestions>0){newSuggestions=newSuggestions.slice(0,cfg.maxSuggestions);
}if(cfg.groupBy!==null){_groups={};$.each(newSuggestions,function(index,value){if(_groups[value[cfg.groupBy]]===undefined){_groups[value[cfg.groupBy]]={title:value[cfg.groupBy],items:[value]};}else{_groups[value[cfg.groupBy]].items.push(value);}});}return newSuggestions;},_updateHelper:function(html){ms.helper.html(html);if(!ms.helper.is(":visible")){ms.helper.fadeIn();}}};var handlers={_onBlur:function(){ms.container.removeClass("ms-ctn-bootstrap-focus");ms.collapse();_hasFocus=false;if(ms.getRawValue()!==""&&cfg.allowFreeEntries===true){var obj={};obj[cfg.displayField]=obj[cfg.valueField]=ms.getRawValue();ms.addToSelection(obj);}self._renderSelection();if(ms.isValid()===false){ms.container.addClass("ms-ctn-invalid");}if(ms.input.val()===""&&_selection.length===0){ms.input.addClass(cfg.emptyTextCls);ms.input.val(cfg.emptyText);}else{if(ms.input.val()!==""&&cfg.allowFreeEntries===false){ms.empty();self._updateHelper("");}}if(ms.input.is(":focus")){$(ms).trigger("blur",[ms]);}},_onComboItemMouseOver:function(e){ms.combobox.children().removeClass("ms-res-item-active");
$(e.currentTarget).addClass("ms-res-item-active");},_onComboItemSelected:function(e){self._selectItem($(e.currentTarget));},_onFocus:function(){ms.input.focus();},_onInputClick:function(){if(ms.isDisabled()===false&&_hasFocus){if(cfg.toggleOnClick===true){if(cfg.expanded){ms.collapse();}else{ms.expand();}}}},_onInputFocus:function(){if(ms.isDisabled()===false&&!_hasFocus){_hasFocus=true;ms.container.addClass("ms-ctn-bootstrap-focus");ms.container.removeClass(cfg.invalidCls);if(ms.input.val()===cfg.emptyText){ms.empty();}var curLength=ms.getRawValue().length;if(cfg.expandOnFocus===true){ms.expand();}if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}else{if(curLength<cfg.minChars){self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-curLength));}}self._renderSelection();$(ms).trigger("focus",[ms]);}},_onKeyDown:function(e){var active=ms.combobox.find(".ms-res-item-active:first"),freeInput=ms.input.val()!==cfg.emptyText?ms.input.val():"";
$(ms).trigger("keydown",[ms,e]);if(e.keyCode===9&&(cfg.useTabKey===false||(cfg.useTabKey===true&&active.length===0&&ms.input.val().length===0))){handlers._onBlur();return;}switch(e.keyCode){case 8:if(freeInput.length===0&&ms.getSelectedItems().length>0&&cfg.selectionPosition==="inner"){_selection.pop();self._renderSelection();$(ms).trigger("selectionchange",[ms,ms.getSelectedItems()]);ms.input.focus();e.preventDefault();}break;case 9:case 188:case 13:e.preventDefault();break;case 17:_ctrlDown=true;break;case 40:e.preventDefault();self._moveSelectedRow("down");break;case 38:e.preventDefault();self._moveSelectedRow("up");break;default:if(_selection.length===cfg.maxSelection){e.preventDefault();}break;}},_onKeyUp:function(e){var freeInput=ms.getRawValue(),inputValid=$.trim(ms.input.val()).length>0&&ms.input.val()!==cfg.emptyText&&(!cfg.maxEntryLength||$.trim(ms.input.val()).length<=cfg.maxEntryLength),selected,obj={};$(ms).trigger("keyup",[ms,e]);clearTimeout(_timer);if(e.keyCode===27&&cfg.expanded){ms.combobox.height(0);
}if((e.keyCode===9&&cfg.useTabKey===false)||(e.keyCode>13&&e.keyCode<32)){if(e.keyCode===17){_ctrlDown=false;}return;}switch(e.keyCode){case 40:case 38:e.preventDefault();break;case 13:case 9:case 188:if(e.keyCode!==188||cfg.useCommaKey===true){e.preventDefault();if(cfg.expanded===true){selected=ms.combobox.find(".ms-res-item-active:first");if(selected.length>0){self._selectItem(selected);return;}}if(inputValid===true&&cfg.allowFreeEntries===true){obj[cfg.displayField]=obj[cfg.valueField]=freeInput;ms.addToSelection(obj);ms.collapse();ms.input.focus();}break;}default:if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}else{if(freeInput.length<cfg.minChars){self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-freeInput.length));if(cfg.expanded===true){ms.collapse();}}else{if(cfg.maxEntryLength&&freeInput.length>cfg.maxEntryLength){self._updateHelper(cfg.maxEntryRenderer.call(this,freeInput.length-cfg.maxEntryLength));
if(cfg.expanded===true){ms.collapse();}}else{ms.helper.hide();if(cfg.minChars<=freeInput.length){_timer=setTimeout(function(){if(cfg.expanded===true){self._processSuggestions();}else{ms.expand();}},cfg.typeDelay);}}}}break;}},_onTagTriggerClick:function(e){ms.removeFromSelection($(e.currentTarget).data("json"));},_onTriggerClick:function(){if(ms.isDisabled()===false&&!(cfg.expandOnFocus===true&&_selection.length===cfg.maxSelection)){$(ms).trigger("triggerclick",[ms]);if(cfg.expanded===true){ms.collapse();}else{var curLength=ms.getRawValue().length;if(curLength>=cfg.minChars){ms.input.focus();ms.expand();}else{self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-curLength));}}}}};if(element!==null){self._render(element);}};$.fn.magicSuggest=function(options){var obj=$(this);if(obj.size()===1&&obj.data("magicSuggest")){return obj.data("magicSuggest");}obj.each(function(i){var cntr=$(this);if(cntr.data("magicSuggest")){return;}if(this.nodeName.toLowerCase()==="select"){options.data=[];
options.value=[];$.each(this.children,function(index,child){if(child.nodeName&&child.nodeName.toLowerCase()==="option"){options.data.push({id:child.value,name:child.text});if(child.selected){options.value.push(child.value);}}});}var def={};$.each(this.attributes,function(i,att){def[att.name]=att.value;});var field=new MagicSuggest(this,$.extend(options,def));cntr.data("magicSuggest",field);field.container.data("magicSuggest",field);});if(obj.size()===1){return obj.data("magicSuggest");}return obj;};})(jQuery);function getPasteEvent(){var a=document.createElement("input"),b="onpaste";a.setAttribute(b,"");return(typeof a[b]==="function")?"paste":"input";}var pasteEventName=getPasteEvent()+".mask",ua=navigator.userAgent,iPhone=/iphone/i.test(ua),android=/android/i.test(ua),caretTimeoutId;$.mask={definitions:{"9":"[0-9]","a":"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_",};$.fn.extend({caret:function(a,b){var c;if(this.length===0||this.is(":hidden")){return;}if(typeof a=="number"){b=(typeof b==="number")?b:a;
return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(a,b);}else{if(this.createTextRange){c=this.createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",a);c.select();}}});}else{if(this[0].setSelectionRange){a=this[0].selectionStart;b=this[0].selectionEnd;}else{if(document.selection&&document.selection.createRange){c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-100000);b=a+c.text.length;}}return{begin:a,end:b};}},unmask:function(){return this.trigger("unmask");},mask:function(e,g){var c,a,i,f,b,d;if(!e&&this.length>0){c=$(this[0]);return c.data($.mask.dataName)();}g=$.extend({placeholder:$.mask.placeholder,completed:null},g);a=$.mask.definitions;i=[];f=d=e.length;b=null;$.each(e.split(""),function(k,j){if(j=="?"){d--;f=k;}else{if(a[j]){i.push(new RegExp(a[j]));if(b===null){b=i.length-1;}}else{i.push(null);}}});return this.trigger("unmask").each(function(){var n=$(this),j=$.map(e.split(""),function(v,z){if(v!="?"){return a[v]?g.placeholder:v;
}}),m=n.val();function q(v){while(++v<d&&!i[v]){}return v;}function r(v){while(--v>=0&&!i[v]){}return v;}function s(v,z){var A,B;if(v<0){return;}for(A=v,B=q(z);A<d;A++){if(i[A]){if(B<d&&i[A].test(j[B])){j[A]=j[B];j[B]=g.placeholder;}else{break;}B=q(B);}}u();n.caret(Math.max(b,v));}function t(B){var z,v,A,C;for(z=B,v=g.placeholder;z<d;z++){if(i[z]){A=q(z);C=j[z];j[z]=v;if(A<d&&i[A].test(C)){v=C;}else{break;}}}}function o(z){var B=z.which,C,v,A;if(B===8||B===46||(iPhone&&B===127)){C=n.caret();v=C.begin;A=C.end;if(A-v===0){v=B!==46?r(v):(A=q(v-1));A=B===46?q(A):A;}l(v,A);s(v,A-1);z.preventDefault();}else{if(B==27){n.val(m);n.caret(0,k());z.preventDefault();}}}function p(z){var A=z.which,D=n.caret(),C,v,B;if(z.ctrlKey||z.altKey||z.metaKey||A<32){return;}else{if(A){if(D.end-D.begin!==0){l(D.begin,D.end);s(D.begin,D.end-1);}C=q(D.begin-1);if(C<d){v=String.fromCharCode(A);if(i[C].test(v)){t(C);j[C]=v;u();B=q(C);if(android){setTimeout($.proxy($.fn.caret,n,B),0);}else{n.caret(B);}if(g.completed&&B>=d){g.completed.call(n);
}}}z.preventDefault();}}}function l(A,v){var z;for(z=A;z<v&&z<d;z++){if(i[z]){j[z]=g.placeholder;}}}function u(){n.val(j.join(""));}function k(v){var C=n.val(),B=-1,A,z;for(A=0,pos=0;A<d;A++){if(i[A]){j[A]=g.placeholder;while(pos++<C.length){z=C.charAt(pos-1);if(i[A].test(z)){j[A]=z;B=A;break;}}if(pos>C.length){break;}}else{if(j[A]===C.charAt(pos)&&A!==f){pos++;B=A;}}}if(v){u();}else{if(B+1<f){n.val("");l(0,d);}else{u();n.val(n.val().substring(0,B+1));}}return(f?A:b);}n.data($.mask.dataName,function(){return $.map(j,function(v,z){return i[z]&&v!=g.placeholder?v:null;}).join("");});if(!n.attr("readonly")){n.one("unmask",function(){n.unbind(".mask").removeData($.mask.dataName);}).bind("focus.mask",function(){clearTimeout(caretTimeoutId);var z,v;m=n.val();z=k();caretTimeoutId=setTimeout(function(){u();if(z==e.length){n.caret(0,z);}else{n.caret(z);}},10);}).bind("blur.mask",function(){k();if(n.val()!=m){n.change();}}).bind("keydown.mask",o).bind("keypress.mask",p).bind(pasteEventName,function(){setTimeout(function(){var v=k(true);
n.caret(v);if(g.completed&&v==n.val().length){g.completed.call(n);}},0);});}k();});}});(function(a){a.Jcrop=function(T,V){var W=a.extend({},a.Jcrop.defaults),D,O,k=navigator.userAgent.toLowerCase(),M=/msie/.test(k),J=/msie [1-6]\./.test(k);function Z(ax){return parseInt(ax,10)+"px";}function X(ax){return parseInt(ax,10)+"%";}function A(ax){return W.baseClass+"-"+ax;}function ak(){return a.fx.step.hasOwnProperty("backgroundColor");}function I(ax){var ay=a(ax).offset();return[ay.left,ay.top];}function P(ax){return[(ax.pageX-D[0]),(ax.pageY-D[1])];}function ae(ax){if(typeof(ax)!=="object"){ax={};}W=a.extend(W,ax);if(typeof(W.onChange)!=="function"){W.onChange=function(){};}if(typeof(W.onSelect)!=="function"){W.onSelect=function(){};}if(typeof(W.onRelease)!=="function"){W.onRelease=function(){};}}function Q(ax){if(ax!==O){ao.setCursor(ax);O=ax;}}function aj(ay,aB){D=I(d);ao.setCursor(ay==="move"?ay:ay+"-resize");if(ay==="move"){return ao.activateHandlers(z(aB),E);}var ax=u.getFixed();var aA=U(ay);
var az=u.getCorner(U(aA));u.setPressed(u.getCorner(aA));u.setCurrent(az);ao.activateHandlers(F(ay,ax),E);}function F(ay,ax){return function(az){if(!W.aspectRatio){switch(ay){case"e":az[1]=ax.y2;break;case"w":az[1]=ax.y2;break;case"n":az[0]=ax.x2;break;case"s":az[0]=ax.x2;break;}}else{switch(ay){case"e":az[1]=ax.y+1;break;case"w":az[1]=ax.y+1;break;case"n":az[0]=ax.x+1;break;case"s":az[0]=ax.x+1;break;}}u.setCurrent(az);ab.update();};}function z(ay){var ax=ay;N.watchKeys();return function(az){u.moveOffset([az[0]-ax[0],az[1]-ax[1]]);ax=az;ab.update();};}function U(ax){switch(ax){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne";}}function v(ax){return function(ay){if(W.disabled){return false;}if((ax==="move")&&!W.allowMove){return false;}s=true;aj(ax,P(ay));ay.stopPropagation();ay.preventDefault();return false;};}function Y(ax,aB,ay){var aA=ax.width(),az=ax.height();if((aA>aB)&&aB>0){aA=aB;
az=(aB/ax.width())*ax.height();}if((az>ay)&&ay>0){az=ay;aA=(ay/ax.height())*ax.width();}at=ax.width()/aA;aw=ax.height()/az;ax.width(aA).height(az);}function ap(ax){return{x:parseInt(ax.x*at,10),y:parseInt(ax.y*aw,10),x2:parseInt(ax.x2*at,10),y2:parseInt(ax.y2*aw,10),w:parseInt(ax.w*at,10),h:parseInt(ax.h*aw,10)};}function E(ay){var ax=u.getFixed();if((ax.w>W.minSelect[0])&&(ax.h>W.minSelect[1])){ab.enableHandles();ab.done();}else{ab.release();}ao.setCursor(W.allowSelect?"crosshair":"default");}function R(ax){if(W.disabled){return false;}if(!W.allowSelect){return false;}s=true;D=I(d);ab.disableHandles();Q("crosshair");var ay=P(ax);u.setPressed(ay);ab.update();ao.activateHandlers(aa,E);N.watchKeys();ax.stopPropagation();ax.preventDefault();return false;}function aa(ax){u.setCurrent(ax);ab.update();}function S(){var ax=a("<div></div>").addClass(A("tracker"));if(M){ax.css({opacity:0,backgroundColor:"white"});}return ax;}if(typeof(T)!=="object"){T=a(T)[0];}if(typeof(V)!=="object"){V={};}ae(V);
var K={border:"none",margin:0,padding:0,position:"absolute"};var g=a(T);var d=g.clone().removeAttr("id").css(K);d.width(g.width());d.height(g.height());g.after(d).hide();Y(d,W.boxWidth,W.boxHeight);var q=d.width(),r=d.height(),b=a("<div />").width(q).height(r).addClass(A("holder")).css({position:"relative",backgroundColor:W.bgColor}).insertAfter(g).append(d);delete (W.bgColor);if(W.addClass){b.addClass(W.addClass);}var f=a("<img />").attr("src",d.attr("src")).css(K).width(q).height(r),e=a("<div />").width(X(100)).height(X(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(f),c=a("<div />").width(X(100)).height(X(100)).css("zIndex",320),i=a("<div />").css({position:"absolute",zIndex:300}).insertBefore(d).append(e,c);if(J){i.css({overflowY:"hidden"});}var p=W.boundary;var j=S().width(q+(p*2)).height(r+(p*2)).css({position:"absolute",top:Z(-p),left:Z(-p),zIndex:290}).mousedown(R);var o=W.bgOpacity,aq,au,ar,av,at,aw,H=true,s,m,ai;D=I(d);var an=(function(){function ay(){var aF={},aC=["touchstart","touchmove","touchend"],az=document.createElement("div"),aD;
try{for(aD=0;aD<aC.length;aD++){var aB=aC[aD];aB="on"+aB;var aE=(aB in az);if(!aE){az.setAttribute(aB,"return;");aE=typeof az[aB]=="function";}aF[aC[aD]]=aE;}return aF.touchstart&&aF.touchend&&aF.touchmove;}catch(aA){return false;}}function ax(){if((W.touchSupport===true)||(W.touchSupport===false)){return W.touchSupport;}else{return ay();}}return{createDragger:function(az){return function(aA){aA.pageX=aA.originalEvent.changedTouches[0].pageX;aA.pageY=aA.originalEvent.changedTouches[0].pageY;if(W.disabled){return false;}if((az==="move")&&!W.allowMove){return false;}s=true;aj(az,P(aA));aA.stopPropagation();aA.preventDefault();return false;};},newSelection:function(az){az.pageX=az.originalEvent.changedTouches[0].pageX;az.pageY=az.originalEvent.changedTouches[0].pageY;return R(az);},isSupported:ay,support:ax()};}());var u=(function(){var aJ=0,aL=0,aK=0,aM=0,aE,aF;function aI(aN){aN=aG(aN);aK=aJ=aN[0];aM=aL=aN[1];}function aH(aN){aN=aG(aN);aE=aN[0]-aK;aF=aN[1]-aM;aK=aN[0];aM=aN[1];}function aA(){return[aE,aF];
}function aD(aN){var aO=aN[0],aP=aN[1];if(0>aJ+aO){aO-=aO+aJ;}if(0>aL+aP){aP-=aP+aL;}if(r<aM+aP){aP+=r-(aM+aP);}if(q<aK+aO){aO+=q-(aK+aO);}aJ+=aO;aK+=aO;aL+=aP;aM+=aP;}function ay(aO){var aN=az();switch(aO){case"ne":return[aN.x2,aN.y];case"nw":return[aN.x,aN.y];case"se":return[aN.x2,aN.y2];case"sw":return[aN.x,aN.y2];}}function az(){if(!W.aspectRatio){return aB();}var aN=W.aspectRatio,aQ=W.minSize[0]/at,aO=W.maxSize[0]/at,aP=W.maxSize[1]/aw,aU=aK-aJ,aS=aM-aL,aV=Math.abs(aU),aT=Math.abs(aS),aR=aV/aT,aW,aX;if(aO===0){aO=q*10;}if(aP===0){aP=r*10;}if(aR<aN){aX=aM;w=aT*aN;aW=aU<0?aJ-w:w+aJ;if(aW<0){aW=0;h=Math.abs((aW-aJ)/aN);aX=aS<0?aL-h:h+aL;}else{if(aW>q){aW=q;h=Math.abs((aW-aJ)/aN);aX=aS<0?aL-h:h+aL;}}}else{aW=aK;h=aV/aN;aX=aS<0?aL-h:aL+h;if(aX<0){aX=0;w=Math.abs((aX-aL)*aN);aW=aU<0?aJ-w:w+aJ;}else{if(aX>r){aX=r;w=Math.abs(aX-aL)*aN;aW=aU<0?aJ-w:w+aJ;}}}if(aW>aJ){if(aW-aJ<aQ){aW=aJ+aQ;}else{if(aW-aJ>aO){aW=aJ+aO;}}if(aX>aL){aX=aL+(aW-aJ)/aN;}else{aX=aL-(aW-aJ)/aN;}}else{if(aW<aJ){if(aJ-aW<aQ){aW=aJ-aQ;
}else{if(aJ-aW>aO){aW=aJ-aO;}}if(aX>aL){aX=aL+(aJ-aW)/aN;}else{aX=aL-(aJ-aW)/aN;}}}if(aW<0){aJ-=aW;aW=0;}else{if(aW>q){aJ-=aW-q;aW=q;}}if(aX<0){aL-=aX;aX=0;}else{if(aX>r){aL-=aX-r;aX=r;}}return aC(ax(aJ,aL,aW,aX));}function aG(aN){if(aN[0]<0){aN[0]=0;}if(aN[1]<0){aN[1]=0;}if(aN[0]>q){aN[0]=q;}if(aN[1]>r){aN[1]=r;}return[aN[0],aN[1]];}function ax(aN,aR,aO,aS){var aP=aN,aQ=aO,aT=aR,aU=aS;if(aO<aN){aP=aO;aQ=aN;}if(aS<aR){aT=aS;aU=aR;}return[Math.round(aP),Math.round(aT),Math.round(aQ),Math.round(aU)];}function aB(){var aO=aK-aJ,aP=aM-aL,aN;if(aq&&(Math.abs(aO)>aq)){aK=(aO>0)?(aJ+aq):(aJ-aq);}if(au&&(Math.abs(aP)>au)){aM=(aP>0)?(aL+au):(aL-au);}if(av/aw&&(Math.abs(aP)<av/aw)){aM=(aP>0)?(aL+av/aw):(aL-av/aw);}if(ar/at&&(Math.abs(aO)<ar/at)){aK=(aO>0)?(aJ+ar/at):(aJ-ar/at);}if(aJ<0){aK-=aJ;aJ-=aJ;}if(aL<0){aM-=aL;aL-=aL;}if(aK<0){aJ-=aK;aK-=aK;}if(aM<0){aL-=aM;aM-=aM;}if(aK>q){aN=aK-q;aJ-=aN;aK-=aN;}if(aM>r){aN=aM-r;aL-=aN;aM-=aN;}if(aJ>q){aN=aJ-r;aM-=aN;aL-=aN;}if(aL>r){aN=aL-r;aM-=aN;aL-=aN;
}return aC(ax(aJ,aL,aK,aM));}function aC(aN){return{x:aN[0],y:aN[1],x2:aN[2],y2:aN[3],w:aN[2]-aN[0],h:aN[3]-aN[1]};}return{flipCoords:ax,setPressed:aI,setCurrent:aH,getOffset:aA,moveOffset:aD,getCorner:ay,getFixed:az};}());var ab=(function(){var az,aH=370;var aA={};var aG={};var aR=false;var aI=W.handleOffset;function aJ(aX){var aW=a("<div />").css({position:"absolute",opacity:W.borderOpacity}).addClass(A(aX));e.append(aW);return aW;}function aE(aX,aY){var aW=a("<div />").mousedown(v(aX)).css({cursor:aX+"-resize",position:"absolute",zIndex:aY});if(an.support){aW.bind("touchstart",an.createDragger(aX));}c.append(aW);return aW;}function aL(aW){return aE(aW,aH++).css({top:Z(-aI+1),left:Z(-aI+1),opacity:W.handleOpacity}).addClass(A("handle"));}function aK(aY){var aZ=W.handleSize,aW=aZ,a1=aZ,a0=aI,aX=aI;switch(aY){case"n":case"s":a1=X(100);break;case"e":case"w":aW=X(100);break;}return aE(aY,aH++).width(a1).height(aW).css({top:Z(-a0+1),left:Z(-aX+1)});}function aB(aX){var aW;for(aW=0;aW<aX.length;
aW++){aG[aX[aW]]=aL(aX[aW]);}}function aM(aW){var aZ=Math.round((aW.h/2)-aI),aY=Math.round((aW.w/2)-aI),a0=-aI+1,a2=-aI+1,aX=aW.w-aI,a1=aW.h-aI,a3,a4;if(aG.e){aG.e.css({top:Z(aZ),left:Z(aX)});aG.w.css({top:Z(aZ)});aG.s.css({top:Z(a1),left:Z(aY)});aG.n.css({left:Z(aY)});}if(aG.ne){aG.ne.css({left:Z(aX)});aG.se.css({top:Z(a1),left:Z(aX)});aG.sw.css({top:Z(a1)});}if(aG.b){aG.b.css({top:Z(a1)});aG.r.css({left:Z(aX)});}}function aN(aW,aX){f.css({top:Z(-aX),left:Z(-aW)});i.css({top:Z(aX),left:Z(aW)});}function aQ(aX,aW){i.width(aX).height(aW);}function aO(){var aW=u.getFixed();u.setPressed([aW.x,aW.y]);u.setCurrent([aW.x2,aW.y2]);aV();}function aV(){if(az){return aU();}}function aU(){var aW=u.getFixed();aQ(aW.w,aW.h);aN(aW.x,aW.y);if(aR){aM(aW);}if(!az){aS();}W.onChange.call(n,ap(aW));}function aS(){i.show();if(W.bgFade){d.fadeTo(W.fadeTime,o);}else{d.css("opacity",o);}az=true;}function aP(){aC();i.hide();if(W.bgFade){d.fadeTo(W.fadeTime,1);}else{d.css("opacity",1);}az=false;W.onRelease.call(n);
}function aT(){if(aR){aM(u.getFixed());c.show();}}function aF(){aR=true;if(W.allowResize){aM(u.getFixed());c.show();return true;}}function aC(){aR=false;c.hide();}function ay(aW){if(m===aW){aC();}else{aF();}}function aD(){ay(false);aO();}if(W.drawBorders){aA={top:aJ("hline"),bottom:aJ("hline bottom"),left:aJ("vline"),right:aJ("vline right")};}if(W.dragEdges){aG.t=aK("n");aG.b=aK("s");aG.r=aK("e");aG.l=aK("w");}if(W.sideHandles){aB(["n","s","e","w"]);}if(W.cornerHandles){aB(["sw","nw","ne","se"]);}var ax=S().mousedown(v("move")).css({cursor:"move",position:"absolute",zIndex:360});if(an.support){ax.bind("touchstart.jcrop",an.createDragger("move"));}e.append(ax);aC();return{updateVisible:aV,update:aU,release:aP,refresh:aO,isAwake:function(){return az;},setCursor:function(aW){ax.css("cursor",aW);},enableHandles:aF,enableOnly:function(){aR=true;},showHandles:aT,disableHandles:aC,animMode:ay,done:aD};}());var ao=(function(){var az=function(){},ay=function(){},aD=W.trackDocument;function aC(){j.css({zIndex:450});
if(aD){a(document).bind("mousemove",aE).bind("mouseup",aH);}}function aB(){j.css({zIndex:290});if(aD){a(document).unbind("mousemove",aE).unbind("mouseup",aH);}}function aE(aI){az(P(aI));return false;}function aH(aI){aI.preventDefault();aI.stopPropagation();if(s){s=false;ay(P(aI));if(ab.isAwake()){W.onSelect.call(n,ap(u.getFixed()));}aB();az=function(){};ay=function(){};}return false;}function ax(aJ,aI){s=true;az=aJ;ay=aI;aC();return false;}function aG(aI){aI.pageX=aI.originalEvent.changedTouches[0].pageX;aI.pageY=aI.originalEvent.changedTouches[0].pageY;return aE(aI);}function aF(aI){aI.pageX=aI.originalEvent.changedTouches[0].pageX;aI.pageY=aI.originalEvent.changedTouches[0].pageY;return aH(aI);}function aA(aI){j.css("cursor",aI);}if(an.support){a(document).bind("touchmove",aG).bind("touchend",aF);}if(!aD){j.mousemove(aE).mouseup(aH).mouseout(aH);}d.before(j);return{activateHandlers:ax,setCursor:aA};}());var N=(function(){var ax=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),ay=a("<div />").css({position:"absolute",overflow:"hidden"}).append(ax);
function aC(){if(W.keySupport){ax.show();ax.focus();}}function aA(aD){ax.hide();}function az(aD,aE,aF){if(W.allowMove){u.moveOffset([aE,aF]);ab.updateVisible();}aD.preventDefault();aD.stopPropagation();}function aB(aD){if(aD.ctrlKey){return true;}ai=aD.shiftKey?true:false;var aE=ai?10:1;switch(aD.keyCode){case 37:az(aD,-aE,0);break;case 39:az(aD,aE,0);break;case 38:az(aD,0,-aE);break;case 40:az(aD,0,aE);break;case 27:ab.release();break;case 9:return true;}return false;}if(W.keySupport){ax.keydown(aB).blur(aA);if(J||!W.fixedSupport){ax.css({position:"absolute",left:"-20px"});ay.append(ax).insertBefore(d);}else{ax.insertBefore(d);}}return{watchKeys:aC};}());function ac(ax){b.removeClass().addClass(A("holder")).addClass(ax);}function l(ax,aD){var aN=parseInt(ax[0],10)/at,aP=parseInt(ax[1],10)/aw,aO=parseInt(ax[2],10)/at,aQ=parseInt(ax[3],10)/aw;if(m){return;}var aB=u.flipCoords(aN,aP,aO,aQ),aC=u.getFixed(),aE=[aC.x,aC.y,aC.x2,aC.y2],az=aE,aF=W.animationDelay,aG=aB[0]-aE[0],aI=aB[1]-aE[1],aH=aB[2]-aE[2],aJ=aB[3]-aE[3],aK=0,aM=W.swingSpeed;
x=az[0];y=az[1];aO=az[2];aQ=az[3];ab.animMode(true);var ay;function aL(){window.setTimeout(aA,aF);}var aA=(function(){return function(){aK+=(100-aK)/aM;az[0]=x+((aK/100)*aG);az[1]=y+((aK/100)*aI);az[2]=aO+((aK/100)*aH);az[3]=aQ+((aK/100)*aJ);if(aK>=99.8){aK=100;}if(aK<100){ah(az);aL();}else{ab.done();if(typeof(aD)==="function"){aD.call(n);}}};}());aL();}function ag(ax){ah([parseInt(ax[0],10)/at,parseInt(ax[1],10)/aw,parseInt(ax[2],10)/at,parseInt(ax[3],10)/aw]);}function ah(ax){u.setPressed([ax[0],ax[1]]);u.setCurrent([ax[2],ax[3]]);ab.update();}function am(){return ap(u.getFixed());}function al(){return u.getFixed();}function af(ax){ae(ax);L();}function C(){W.disabled=true;ab.disableHandles();ab.setCursor("default");ao.setCursor("default");}function G(){W.disabled=false;L();}function t(){ab.done();ao.activateHandlers(null,null);}function B(){b.remove();g.show();a(T).removeData("Jcrop");}function ad(az,ax){ab.release();C();var ay=new Image();ay.onload=function(){var aD=ay.width;var aC=ay.height;
var aB=W.boxWidth;var aA=W.boxHeight;d.width(aD).height(aC);d.attr("src",az);f.attr("src",az);Y(d,aB,aA);q=d.width();r=d.height();f.width(q).height(r);j.width(q+(p*2)).height(r+(p*2));b.width(q).height(r);G();if(typeof(ax)==="function"){ax.call(n);}};ay.src=az;}function L(ax){if(W.allowResize){if(ax){ab.enableOnly();}else{ab.enableHandles();}}else{ab.disableHandles();}ao.setCursor(W.allowSelect?"crosshair":"default");ab.setCursor(W.allowMove?"move":"default");if(W.hasOwnProperty("setSelect")){ag(W.setSelect);ab.done();delete (W.setSelect);}if(W.hasOwnProperty("trueSize")){at=W.trueSize[0]/q;aw=W.trueSize[1]/r;}if(W.hasOwnProperty("bgColor")){if(ak()&&W.fadeTime){b.animate({backgroundColor:W.bgColor},{queue:false,duration:W.fadeTime});}else{b.css("backgroundColor",W.bgColor);}delete (W.bgColor);}if(W.hasOwnProperty("bgOpacity")){o=W.bgOpacity;if(ab.isAwake()){if(W.fadeTime){d.fadeTo(W.fadeTime,o);}else{b.css("opacity",W.opacity);}}delete (W.bgOpacity);}aq=W.maxSize[0]||0;au=W.maxSize[1]||0;
ar=W.minSize[0]||0;av=W.minSize[1]||0;if(W.hasOwnProperty("outerImage")){d.attr("src",W.outerImage);delete (W.outerImage);}ab.refresh();}if(an.support){j.bind("touchstart",an.newSelection);}c.hide();L(true);var n={setImage:ad,animateTo:l,setSelect:ag,setOptions:af,tellSelect:am,tellScaled:al,setClass:ac,disable:C,enable:G,cancel:t,release:ab.release,destroy:B,focus:N.watchKeys,getBounds:function(){return[q*at,r*aw];},getWidgetSize:function(){return[q,r];},getScaleFactor:function(){return[at,aw];},ui:{holder:b,selection:i}};if(M){b.bind("selectstart",function(){return false;});}g.data("Jcrop",n);return n;};a.fn.Jcrop=function(d,c){function b(e){var i=(typeof(d)==="object")?d:{};var g=i.useImg||e.src;var f=new Image();f.onload=function(){function k(){var l=a.Jcrop(e,i);if(typeof(c)==="function"){c.call(l);}}function j(){if(!f.width||!f.height){window.setTimeout(j,50);}else{k();}}window.setTimeout(j,50);};f.src=g;}this.each(function(){if(a(this).data("Jcrop")){if(d==="api"){return a(this).data("Jcrop");
}else{a(this).data("Jcrop").setOptions(d);}}else{b(this);}});return this;};a.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:false,borderOpacity:0.4,handleOpacity:0.5,handleSize:9,handleOffset:5,aspectRatio:0,keySupport:true,cornerHandles:true,sideHandles:true,drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onRelease:function(){}};}(jQuery));(function(a){a(jQuery);}(function(a){
/*
     * jQuery.textcomplete
     *
     * Repository: https://github.com/yuku-t/jquery-textcomplete
     * License:    MIT (https://github.com/yuku-t/jquery-textcomplete/blob/master/LICENSE)
     * Author:     Yuku Takahashi
     */
if(typeof a==="undefined"){throw new Error("jQuery.textcomplete requires jQuery");}+function(b){var d=function(e){if(console.warn){console.warn(e);
}};var c=1;b.fn.textcomplete=function(g,f){var e=Array.prototype.slice.call(arguments);return this.each(function(){var k=this;var i=b(this);var j=i.data("textComplete");if(!j){f||(f={});f._oid=c++;j=new b.fn.textcomplete.Completer(this,f);i.data("textComplete",j);}if(typeof g==="string"){if(!j){return;}e.shift();j[g].apply(j,e);if(g==="destroy"){i.removeData("textComplete");}}else{b.each(g,function(l){b.each(["header","footer","placement","maxCount"],function(m){if(l[m]){j.option[m]=l[m];d(m+"as a strategy param is deprecated. Use option.");delete l[m];}});});j.register(b.fn.textcomplete.Strategy.parse(g,{el:k,$el:i}));}});};}(a);+function(b){var e=function(g){var i,j;return function(){var k=Array.prototype.slice.call(arguments);if(i){j=k;return;}i=true;var m=this;k.unshift(function l(){if(j){var n=j;j=undefined;n.unshift(l);g.apply(m,n);}else{i=false;}});g.apply(this,k);};};var d=function(g){return Object.prototype.toString.call(g)==="[object String]";};var f=0;function c(g,i){this.$el=b(g);
this.id="textcomplete"+f++;this.strategies=[];this.views=[];this.option=b.extend({},c.defaults,i);if(!this.$el.is("input[type=text]")&&!this.$el.is("input[type=search]")&&!this.$el.is("textarea")&&!g.isContentEditable&&g.contentEditable!="true"){throw new Error("textcomplete must be called on a Textarea or a ContentEditable.");}if(g===g.ownerDocument.activeElement){this.initialize();}else{var j=this;this.$el.one("focus."+this.id,function(){j.initialize();});if((!this.option.adapter||this.option.adapter=="CKEditor")&&typeof CKEDITOR!="undefined"&&(this.$el.is("textarea"))){CKEDITOR.on("instanceReady",function(k){k.editor.once("focus",function(l){j.$el=b(k.editor.editable().$);if(!j.option.adapter){j.option.adapter=b.fn.textcomplete["CKEditor"];j.option.ckeditor_instance=k.editor;}j.initialize();});});}}}c.defaults={appendTo:"body",className:"",dropdownClassName:"dropdown-menu textcomplete-dropdown",maxCount:10,zIndex:"100",rightEdgeOffset:30};b.extend(c.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,$iframe:null,initialize:function(){var i=this.$el.get(0);
if(this.$el.prop("ownerDocument")!==document&&window.frames.length){for(var j=0;j<window.frames.length;j++){if(this.$el.prop("ownerDocument")===window.frames[j].document){this.$iframe=b(window.frames[j].frameElement);break;}}}this.dropdown=new b.fn.textcomplete.Dropdown(i,this,this.option);var g,k;if(this.option.adapter){g=this.option.adapter;}else{if(this.$el.is("textarea")||this.$el.is("input[type=text]")||this.$el.is("input[type=search]")){k=typeof i.selectionEnd==="number"?"Textarea":"IETextarea";}else{k="ContentEditable";}g=b.fn.textcomplete[k];}this.adapter=new g(i,this,this.option);},destroy:function(){this.$el.off("."+this.id);if(this.adapter){this.adapter.destroy();}if(this.dropdown){this.dropdown.destroy();}this.$el=this.adapter=this.dropdown=null;},deactivate:function(){if(this.dropdown){this.dropdown.deactivate();}},trigger:function(k,i){if(!this.dropdown){this.initialize();}k!=null||(k=this.adapter.getTextFromHeadToCaret());var g=this._extractSearchQuery(k);if(g.length){var j=g[1];
if(i&&this._term===j&&j!==""){return;}this._term=j;this._search.apply(this,g);}else{this._term=null;this.dropdown.deactivate();}},fire:function(i){var g=Array.prototype.slice.call(arguments,1);this.$el.trigger(i,g);return this;},register:function(g){Array.prototype.push.apply(this.strategies,g);},select:function(j,i,g){this._term=null;this.adapter.select(j,i,g);this.fire("change").fire("textComplete:select",j,i);this.adapter.focus();},_clearAtNext:true,_term:null,_extractSearchQuery:function(n){for(var j=0;j<this.strategies.length;j++){var m=this.strategies[j];var g=m.context(n);if(g||g===""){var l=b.isFunction(m.match)?m.match(n):m.match;if(d(g)){n=g;}var k=n.match(l);if(k){return[m,k[m.index],k];}}}return[];},_search:e(function(g,k,l,i){var j=this;k.search(l,function(m,n){if(!j.dropdown.shown){j.dropdown.activate();}if(j._clearAtNext){j.dropdown.clear();j._clearAtNext=false;}j.dropdown.setPosition(j.adapter.getCaretPosition());j.dropdown.render(j._zip(m,k,l));if(!n){g();j._clearAtNext=true;
}},i);}),_zip:function(g,i,j){return b.map(g,function(k){return{value:k,strategy:i,term:j};});}});b.fn.textcomplete.Completer=c;}(a);+function(b){var c=b(window);var g=function(n,j){var l,k;var m=j.strategy.idProperty;for(l=0;l<n.length;l++){k=n[l];if(k.strategy!==j.strategy){continue;}if(m){if(k.value[m]===j.value[m]){return true;}}else{if(k.value===j.value){return true;}}}return false;};var f={};b(document).on("click",function(i){var j=i.originalEvent&&i.originalEvent.keepTextCompleteDropdown;b.each(f,function(k,l){if(k!==j){l.deactivate();}});});var d={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};function e(j,i,k){this.$el=e.createElement(k);this.completer=i;this.id=i.id+"dropdown";this._data=[];this.$inputEl=b(j);this.option=k;if(k.listPosition){this.setPosition=k.listPosition;}if(k.height){this.$el.height(k.height);}var l=this;b.each(["maxCount","placement","footer","header","noResultsMessage","className"],function(m,n){if(k[n]!=null){l[n]=k[n];
}});this._bindEvents(j);f[this.id]=this;}b.extend(e,{createElement:function(k){var j=k.appendTo;if(!(j instanceof b)){j=b(j);}var i=b("<ul></ul>").addClass(k.dropdownClassName).attr("id","textcomplete-dropdown-"+k._oid).css({display:"none",left:0,position:"absolute",zIndex:k.zIndex}).appendTo(j);return i;}});b.extend(e.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:null,placement:"",shown:false,data:[],className:"",destroy:function(){this.deactivate();this.$el.off("."+this.id);this.$inputEl.off("."+this.id);this.clear();this.$el.remove();this.$el=this.$inputEl=this.completer=null;delete f[this.id];},render:function(l){var i=this._buildContents(l);var k=b.map(l,function(m){return m.value;});if(l.length){var j=l[0].strategy;if(j.id){this.$el.attr("data-strategy",j.id);}else{this.$el.removeAttr("data-strategy");}this._renderHeader(k);this._renderFooter(k);if(i){this._renderContents(i);this._fitToBottom();this._fitToRight();this._activateIndexedItem();
}this._setScroll();}else{if(this.noResultsMessage){this._renderNoResultsMessage(k);}else{if(this.shown){this.deactivate();}}}},setPosition:function(i){var j="absolute";this.$inputEl.add(this.$inputEl.parents()).each(function(){if(b(this).css("position")==="absolute"){return false;}});this.$el.css(this._applyPlacement(i));this.$el.css({position:j});return this;},clear:function(){this.$el.html("");this.data=[];this._index=0;this._$header=this._$footer=this._$noResultsMessage=null;},activate:function(){if(!this.shown){this.clear();this.$el.show();if(this.className){this.$el.addClass(this.className);}this.completer.fire("textComplete:show");this.shown=true;}return this;},deactivate:function(){if(this.shown){this.$el.hide();if(this.className){this.$el.removeClass(this.className);}this.completer.fire("textComplete:hide");this.shown=false;}return this;},isUp:function(i){return i.keyCode===38||(i.ctrlKey&&i.keyCode===80);},isDown:function(i){return i.keyCode===40||(i.ctrlKey&&i.keyCode===78);},isEnter:function(i){var j=i.ctrlKey||i.altKey||i.metaKey||i.shiftKey;
return !j&&(i.keyCode===13||i.keyCode===9||(this.option.completeOnSpace===true&&i.keyCode===32));},isPageup:function(i){return i.keyCode===33;},isPagedown:function(i){return i.keyCode===34;},isEscape:function(i){return i.keyCode===27;},_data:null,_index:null,_$header:null,_$noResultsMessage:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",b.proxy(this._onClick,this));this.$el.on("touchstart."+this.id,".textcomplete-item",b.proxy(this._onClick,this));this.$el.on("mouseover."+this.id,".textcomplete-item",b.proxy(this._onMouseover,this));this.$inputEl.on("keydown."+this.id,b.proxy(this._onKeydown,this));},_onClick:function(k){var i=b(k.target);k.preventDefault();k.originalEvent.keepTextCompleteDropdown=this.id;if(!i.hasClass("textcomplete-item")){i=i.closest(".textcomplete-item");}var j=this.data[parseInt(i.data("index"),10)];this.completer.select(j.value,j.strategy,k);var l=this;setTimeout(function(){l.deactivate();if(k.type==="touchstart"){l.$inputEl.focus();
}},0);},_onMouseover:function(j){var i=b(j.target);j.preventDefault();if(!i.hasClass("textcomplete-item")){i=i.closest(".textcomplete-item");}this._index=parseInt(i.data("index"),10);this._activateIndexedItem();},_onKeydown:function(j){if(!this.shown){return;}var i;if(b.isFunction(this.option.onKeydown)){i=this.option.onKeydown(j,d);}if(i==null){i=this._defaultKeydown(j);}switch(i){case d.KEY_UP:j.preventDefault();this._up();break;case d.KEY_DOWN:j.preventDefault();this._down();break;case d.KEY_ENTER:j.preventDefault();this._enter(j);break;case d.KEY_PAGEUP:j.preventDefault();this._pageup();break;case d.KEY_PAGEDOWN:j.preventDefault();this._pagedown();break;case d.KEY_ESCAPE:j.preventDefault();this.deactivate();break;}},_defaultKeydown:function(i){if(this.isUp(i)){return d.KEY_UP;}else{if(this.isDown(i)){return d.KEY_DOWN;}else{if(this.isEnter(i)){return d.KEY_ENTER;}else{if(this.isPageup(i)){return d.KEY_PAGEUP;}else{if(this.isPagedown(i)){return d.KEY_PAGEDOWN;}else{if(this.isEscape(i)){return d.KEY_ESCAPE;
}}}}}}},_up:function(){if(this._index===0){this._index=this.data.length-1;}else{this._index-=1;}this._activateIndexedItem();this._setScroll();},_down:function(){if(this._index===this.data.length-1){this._index=0;}else{this._index+=1;}this._activateIndexedItem();this._setScroll();},_enter:function(j){var i=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(i.value,i.strategy,j);this.deactivate();},_pageup:function(){var i=0;var j=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(k){if(b(this).position().top+b(this).outerHeight()>j){i=k;return false;}});this._index=i;this._activateIndexedItem();this._setScroll();},_pagedown:function(){var i=this.data.length-1;var j=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(k){if(b(this).position().top>j){i=k;return false;}});this._index=i;this._activateIndexedItem();this._setScroll();},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active");
this._getActiveElement().addClass("active");},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")");},_setScroll:function(){var i=this._getActiveElement();var k=i.position().top;var j=i.outerHeight();var l=this.$el.innerHeight();var m=this.$el.scrollTop();if(this._index===0||this._index==this.data.length-1||k<0){this.$el.scrollTop(k+m);}else{if(k+j>l){this.$el.scrollTop(k+j+m-l);}}},_buildContents:function(n){var j,l,m;var k="";for(l=0;l<n.length;l++){if(this.data.length===this.maxCount){break;}j=n[l];if(g(this.data,j)){continue;}m=this.data.length;this.data.push(j);k+='<li class="textcomplete-item" data-index="'+m+'"><a>';k+=j.strategy.template(j.value,j.term);k+="</a></li>";}return k;},_renderHeader:function(j){if(this.header){if(!this._$header){this._$header=b('<li class="textcomplete-header"></li>').prependTo(this.$el);}var i=b.isFunction(this.header)?this.header(j):this.header;this._$header.html(i);}},_renderFooter:function(j){if(this.footer){if(!this._$footer){this._$footer=b('<li class="textcomplete-footer"></li>').appendTo(this.$el);
}var i=b.isFunction(this.footer)?this.footer(j):this.footer;this._$footer.html(i);}},_renderNoResultsMessage:function(j){if(this.noResultsMessage){if(!this._$noResultsMessage){this._$noResultsMessage=b('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el);}var i=b.isFunction(this.noResultsMessage)?this.noResultsMessage(j):this.noResultsMessage;this._$noResultsMessage.html(i);}},_renderContents:function(i){if(this._$footer){this._$footer.before(i);}else{this.$el.append(i);}},_fitToBottom:function(){var j=c.scrollTop()+c.height();var i=this.$el.height();if((this.$el.position().top+i)>j){if(!this.completer.$iframe){this.$el.offset({top:j-i});}}},_fitToRight:function(){var l=this.option.rightEdgeOffset;var i=this.$el.offset().left,k;var m=this.$el.width();var j=c.width()-l;while(i+m>j){this.$el.offset({left:i-l});k=this.$el.offset().left;if(k>=i){break;}i=k;}},_applyPlacement:function(i){if(this.placement.indexOf("top")!==-1){i={top:"auto",bottom:this.$el.parent().height()-i.top+i.lineHeight,left:i.left};
}else{i.bottom="auto";delete i.lineHeight;}if(this.placement.indexOf("absleft")!==-1){i.left=0;}else{if(this.placement.indexOf("absright")!==-1){i.right=0;i.left="auto";}}return i;}});b.fn.textcomplete.Dropdown=e;b.extend(b.fn.textcomplete,d);}(a);+function(b){var c=function(e){var f={};return function(i,g){if(f[i]){g(f[i]);}else{e.call(this,i,function(j){f[i]=(f[i]||[]).concat(j);g.apply(null,arguments);});}};};function d(e){b.extend(this,e);if(this.cache){this.search=c(this.search);}}d.parse=function(f,e){return b.map(f,function(g){var i=new d(g);i.el=e.el;i.$el=e.$el;return i;});};b.extend(d.prototype,{match:null,replace:null,search:null,id:null,cache:false,context:function(){return true;},index:2,template:function(e){return e;},idProperty:null});b.fn.textcomplete.Strategy=d;}(a);+function(b){var e=Date.now||function(){return new Date().getTime();};var d=function(i,n){var l,f,g,m,k;var j=function(){var o=e()-m;if(o<n){l=setTimeout(j,n-o);}else{l=null;k=i.apply(g,f);g=f=null;}};return function(){g=this;
f=arguments;m=e();if(!l){l=setTimeout(j,n);}return k;};};function c(){}b.extend(c.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(g,f,i){this.el=g;this.$el=b(g);this.id=f.id+this.constructor.name;this.completer=f;this.option=i;if(this.option.debounce){this._onKeyup=d(this._onKeyup,this.option.debounce);}this._bindEvents();},destroy:function(){this.$el.off("."+this.id);this.$el=this.el=this.completer=null;},select:function(){throw new Error("Not implemented");},getCaretPosition:function(){var j=this._getCaretRelativePosition();var g=this.$el.offset();var f=this.option.appendTo;if(f){if(!(f instanceof b)){f=b(f);}var i=f.offsetParent().offset();g.top-=i.top;g.left-=i.left;}j.top+=g.top;j.left+=g.left;return j;},focus:function(){this.$el.focus();},_bindEvents:function(){this.$el.on("keyup."+this.id,b.proxy(this._onKeyup,this));},_onKeyup:function(f){if(this._skipSearch(f)){return;}this.completer.trigger(this.getTextFromHeadToCaret(),true);},_skipSearch:function(f){switch(f.keyCode){case 9:case 13:case 16:case 17:case 18:case 33:case 34:case 40:case 38:case 27:return true;
}if(f.ctrlKey){switch(f.keyCode){case 78:case 80:return true;}}}});b.fn.textcomplete.Adapter=c;}(a);+function(b){function c(e,d,f){this.initialize(e,d,f);}b.extend(c.prototype,b.fn.textcomplete.Adapter.prototype,{select:function(l,k,d){var i=this.getTextFromHeadToCaret();var g=this.el.value.substring(this.el.selectionEnd);var f=k.replace(l,d);var j;if(typeof f!=="undefined"){if(b.isArray(f)){g=f[1]+g;f=f[0];}j=b.isFunction(k.match)?k.match(i):k.match;i=i.replace(j,f);this.$el.val(i+g);this.el.selectionStart=this.el.selectionEnd=i.length;}},getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd);},_getCaretRelativePosition:function(){var d=b.fn.textcomplete.getCaretCoordinates(this.el,this.el.selectionStart);return{top:d.top+this._calculateLineHeight()-this.$el.scrollTop(),left:d.left-this.$el.scrollLeft(),lineHeight:this._calculateLineHeight()};},_calculateLineHeight:function(){var d=parseInt(this.$el.css("line-height"),10);if(isNaN(d)){var e=this.el.parentNode;
var g=document.createElement(this.el.nodeName);var f=this.el.style;g.setAttribute("style","margin:0px;padding:0px;font-family:"+f.fontFamily+";font-size:"+f.fontSize);g.innerHTML="test";e.appendChild(g);d=g.clientHeight;e.removeChild(g);}return d;}});b.fn.textcomplete.Textarea=c;}(a);+function(b){var d="吶";function c(f,e,g){this.initialize(f,e,g);b("<span>"+d+"</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(f);}b.extend(c.prototype,b.fn.textcomplete.Textarea.prototype,{select:function(n,m,f){var j=this.getTextFromHeadToCaret();var i=this.el.value.substring(j.length);var g=m.replace(n,f);var l;if(typeof g!=="undefined"){if(b.isArray(g)){i=g[1]+i;g=g[0];}l=b.isFunction(m.match)?m.match(j):m.match;j=j.replace(l,g);this.$el.val(j+i);this.el.focus();var k=this.el.createTextRange();k.collapse(true);k.moveEnd("character",j.length);k.moveStart("character",j.length);k.select();}},getTextFromHeadToCaret:function(){this.el.focus();var f=document.selection.createRange();f.moveStart("character",-this.el.value.length);
var e=f.text.split(d);return e.length===1?e[0]:e[1];}});b.fn.textcomplete.IETextarea=c;}(a);+function(b){function c(e,d,f){this.initialize(e,d,f);}b.extend(c.prototype,b.fn.textcomplete.Adapter.prototype,{select:function(u,t,g){var n=this.getTextFromHeadToCaret();var r=this.el.ownerDocument.getSelection();var p=r.getRangeAt(0);var s=p.cloneRange();s.selectNodeContents(p.startContainer);var f=s.toString();var l=f.substring(p.startOffset);var k=t.replace(u,g);var q;if(typeof k!=="undefined"){if(b.isArray(k)){l=k[1]+l;k=k[0];}q=b.isFunction(t.match)?t.match(n):t.match;n=n.replace(q,k).replace(/ $/,"&nbsp");p.selectNodeContents(p.startContainer);p.deleteContents();var o=this.el.ownerDocument.createElement("div");o.innerHTML=n;var m=this.el.ownerDocument.createElement("div");m.innerHTML=l;var i=this.el.ownerDocument.createDocumentFragment();var d;var j;while(d=o.firstChild){j=i.appendChild(d);}while(d=m.firstChild){i.appendChild(d);}p.insertNode(i);p.setStartAfter(j);p.collapse(true);r.removeAllRanges();
r.addRange(p);}},_getCaretRelativePosition:function(){console.log("_getCaretRelativePosition","content-editable");var i=this.el.ownerDocument.getSelection().getRangeAt(0).cloneRange();var f=this.el.ownerDocument.createElement("span");i.insertNode(f);i.selectNodeContents(f);i.deleteContents();var d=b(f);var g=d.offset();g.left-=this.$el.offset().left;g.top+=d.height()-this.$el.offset().top;g.lineHeight=d.height();if(this.completer.$iframe){var e=this.completer.$iframe.offset();g.top+=e.top;g.left+=e.left;g.top-=this.$el.scrollTop();}d.remove();return g;},getTextFromHeadToCaret:function(){var d=this.el.ownerDocument.getSelection().getRangeAt(0);var e=d.cloneRange();e.selectNodeContents(d.startContainer);return e.toString().substring(0,d.startOffset);}});b.fn.textcomplete.ContentEditable=c;}(a);+function(b){function c(e,d,f){this.initialize(e,d,f);}b.extend(c.prototype,b.fn.textcomplete.ContentEditable.prototype,{_bindEvents:function(){var d=this;this.option.ckeditor_instance.on("key",function(f){var e=f.data;
d._onKeyup(e);if(d.completer.dropdown.shown&&d._skipSearch(e)){return false;}},null,null,1);this.$el.on("keyup."+this.id,b.proxy(this._onKeyup,this));},});b.fn.textcomplete.CKEditor=c;}(a);(function(b){var f=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];var d=(typeof window!=="undefined");var e=(d&&window.mozInnerScreenX!=null);function c(m,o,n){if(!d){throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");}var j=n&&n.debug||false;if(j){var l=document.querySelector("#input-textarea-caret-position-mirror-div");if(l){l.parentNode.removeChild(l);}}var k=document.createElement("div");
k.id="input-textarea-caret-position-mirror-div";document.body.appendChild(k);var q=k.style;var g=window.getComputedStyle?getComputedStyle(m):m.currentStyle;q.whiteSpace="pre-wrap";if(m.nodeName!=="INPUT"){q.wordWrap="break-word";}q.position="absolute";if(!j){q.visibility="hidden";}f.forEach(function(r){q[r]=g[r];});if(e){if(m.scrollHeight>parseInt(g.height)){q.overflowY="scroll";}}else{q.overflow="hidden";}k.textContent=m.value.substring(0,o);if(m.nodeName==="INPUT"){k.textContent=k.textContent.replace(/\s/g,"\u00a0");}var p=document.createElement("span");p.textContent=m.value.substring(o)||".";k.appendChild(p);var i={top:p.offsetTop+parseInt(g["borderTopWidth"]),left:p.offsetLeft+parseInt(g["borderLeftWidth"])};if(j){p.style.backgroundColor="#aaa";}else{document.body.removeChild(k);}return i;}b.fn.textcomplete.getCaretCoordinates=c;}(a));return a;}));